{"version":3,"file":"js/653.84525f54.js","mappings":"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","sources":["webpack://bypixel/./src/components/gameView/mainCanvas.vue","webpack://bypixel/./src/components/gameView/mainCanvas.vue?89e4","webpack://bypixel/./src/components/gameView/situation.vue","webpack://bypixel/./src/components/gameView/situation.vue?4e29","webpack://bypixel/./src/components/gameView/bottomBar.vue","webpack://bypixel/./src/components/gameView/bottomBar.vue?8410","webpack://bypixel/./src/components/gameView/topUserInfo.vue","webpack://bypixel/./src/components/gameView/topUserInfo.vue?b012","webpack://bypixel/./src/views/gameView.vue","webpack://bypixel/./src/views/gameView.vue?e448"],"sourcesContent":["<template>\n  <div ref=\"cc\" id=\"canvasContainer\">\n    <v-stage ref=\"stage\" :config = \"configKonva\" @touchmove=\"scaleMove\" @touchstart=\"scaleStart\" @touchend=\"scaleEnd\">\n      <v-layer ref=\"layer\" :config=\"configLayer\">\n\n        <v-group ref=\"Field\" :config=\"configField\">\n          <v-rect v-for=\"(square, index) in configSquares \" :key=\"index\" :config=\"square\" @touchend=\"colorEvent\" />          \n        </v-group>\n\n        <!-- <v-image :config=\"configImage\"></v-image> -->\n        <!-- <v-rect :config=\"a\"></v-rect> -->\n        <!-- <v-text :config=\"text\"></v-text> -->\n\n      </v-layer>\n    </v-stage>\n  </div>\n\n</template>\n\n\n<script setup>\nimport user from \"@/modules/userState\";\nimport { toRefs, ref, reactive, defineProps, defineEmits,onMounted,watch  } from \"vue\";\nimport canvas from \"../../modules/canvasState\";\nimport axios from \"../../request/axios\";\n// import 直接执行\n\nconst props = defineProps({\n  mode: {\n    type: Number,\n    default: 0\n  },\n  refresh: {\n    type: Boolean,\n  },\n});\nconst { mode,refresh } = toRefs(props);   //得到的props是响应式的\nconsole.log(\"mode.value:\",mode.value);\nlet emit = defineEmits(['changeMode',\"changeRefresh\"]);\n\n// 画布缩放\nlet configLayer = reactive({\n  scaleX:1,\n  scaleY:1,\n})\n\n// 初始化数据\ncanvas.initCanvasData();\n\nlet configKonva = canvas.configKonva;\ncanvas.fillConfigKonva();\n\nlet configField = canvas.configField;\ncanvas.fillconfigField();\n\nlet configSquares = canvas.configSquares;\ncanvas.fillConfigSquares();\n\n\n// cc是canvasContainer\nlet cc = ref(null);\nlet stage = ref(null);\n// Field是画布\nlet Field = ref(null);\nonMounted(() => {\n  // console.log(\"canvasContainer\", cc.value);  \n  // let FieldContext = Field.value.getNode().children[26];用children拿就会乱序\n  // console.log(FieldContext);  \n  // 用name拿不会乱序\n  stage.value.getStage()\n    .find(`.square${canvas.latestPosition.value[0] * canvas.squareXnum + canvas.latestPosition.value[1]}`)[0]\n    .moveToTop();\n  // 首次显示最新格子：进入主页面之前请求，fill时设置stroke，mounted时movetoTop\n  console.log(canvas.configSquares);\n})\n\n\n\n// 双指缩放\nlet scaleController = reactive({\n  scale: 1,    //field 的缩放倍率\n  centerX0: 0,   //stage里的缩放位置，不变\n  centerY0: 0,\n  centerX: 0,   //原centerX0和centerY0在缩放后对应Field的位置，应该与前者重合\n  centerY: 0,  \n  oldDistance:0,   //上一次move的两指间距离\n});\n\nlet getDistance = (a,b) => {\n  return Math.hypot(a.x - b.x, a.y - b.y);\n}\nlet getCenter = (a,b) => {\n  return { x: (a.x + b.x) / 2, y: (a.y + b.y) / 2 };\n}\n\n// let text = reactive({\n//   x: 0,\n//   y: 0,\n//   text: \"no\",\n//   fontSize: 20,\n//   fontFamily: 'Calibri',\n//   fill: 'green'\n// })\n\nlet scaleStart = (event) => {\n// 设置初始的两指距离\n  if (event.evt == undefined) {\n    // console.log(\"touchstart\", event);    \n    if (event.touches.length == 2) {\n      let a = {\n        x: event.touches[0].clientX,\n        y: event.touches[0].clientY,\n      }\n      let b = {\n        x: event.touches[1].clientX,\n        y: event.touches[1].clientY,        \n      }\n      let distance = getDistance(a, b);\n      scaleController.oldDistance = distance;\n\n      // 求client中间点\n      let center = getCenter(a, b);\n      // 得到中间点在stage里的坐标\n      let stageX = document.querySelector(\"#canvasContainer\").getBoundingClientRect().x;\n      let stageY = document.querySelector(\"#canvasContainer\").getBoundingClientRect().y;\n      scaleController.centerX0 = center.x - stageX;\n      scaleController.centerY0 = center.y - stageY;   \n\n      // text.text = `start ${scaleController.oldDistance}`;  \n    }\n  }\n}\n\nlet scaleEnd = (event) => {\n  // 去除这次的两指初始距离\n  console.log(\"end:\", event);\n  if (event.evt == undefined) {\n    scaleController.oldDistance = 0;\n    scaleController.centerX0 = 0;\n    scaleController.centerY0 = 0;\n    scaleController.centerX = 0;\n    scaleController.centerY = 0;\n    // text.text = `end`;  \n\n  }\n}\n\nlet scaleMove = (event) => {\n  if (event.evt == undefined) {\n    // 此时event是stage而不是点到了rect\n  // console.log(\"event.changedTouches\", event.changedTouches);\n  // console.log(\"event.changedTouches[0].clientX\", event.changedTouches[0].clientX);\n  // console.log(\"event.changedTouches[0].clientY\", event.changedTouches[0].clientY);\n    if (scaleController.oldDistance != 0) {\n      // 存在上一次的两指距离\n      if (event.changedTouches.length == 2) {\n        // 两个触点是缩放\n        // 得到新的两指距离\n        let a = {\n          x: event.changedTouches[0].clientX,\n          y: event.changedTouches[0].clientY,\n        }\n        let b = {\n          x: event.changedTouches[1].clientX,\n          y: event.changedTouches[1].clientY,        \n        }\n        let newDistance = getDistance(a, b);\n        // 两次之比求出这次move增减的倍率\n        let scrollSpeed = 0.04;\n        let ratio = newDistance / scaleController.oldDistance * scrollSpeed;\n        if (ratio > 1.5 * scrollSpeed) {\n          ratio = 1.5 * scrollSpeed;\n        } else if (ratio < 0.7 * scrollSpeed) {\n          ratio = 0.7 * scrollSpeed;\n        }\n        // 得到真实scale\n        if (ratio > 1*scrollSpeed) {\n          scaleController.scale = scaleController.scale + ratio > 4 ? 4 : scaleController.scale + ratio;          \n        } else if (ratio < 1*scrollSpeed) {\n          scaleController.scale = scaleController.scale - ratio > 4 ? 4 : scaleController.scale - ratio;             \n        }\n        // 设置缩放范围\n        if (scaleController.scale < 1) {\n          scaleController.scale = 1;\n        }\n        if (scaleController.scale > 4) {\n          scaleController.scale = 4;\n        }\n\n        // 求新的缩放后的中间点\n        let center = getCenter(a, b);\n        // 得到中间点在stage里的坐标\n        let stageX = document.querySelector(\"#canvasContainer\").getBoundingClientRect().x;\n        let stageY = document.querySelector(\"#canvasContainer\").getBoundingClientRect().y;\n        scaleController.centerX = center.x - stageX;\n        scaleController.centerY = center.y - stageY;   \n        // 得到中间点相对于field的位置  \n        scaleController.centerX = scaleController.centerX0 * scaleController.scale * canvas.fieldScale0;\n        scaleController.centerY = scaleController.centerY0 * scaleController.scale * canvas.fieldScale0;  \n\n\n        // text.text = `${scaleController.scale}\n        // ${scaleController.centerX}\n        // ${scaleController.centerY}`;  \n\n        // 控制fieldscale\n        if (scaleController.scale == 1) {\n        // 当scale==1时强制field回归fieldScale0，fieldX0，fieldY0，不能drag\n          canvas.configField.scaleX =  canvas.fieldScale0;\n          canvas.configField.scaleY =  canvas.fieldScale0;\n          canvas.configField.x = canvas.fieldX0;\n          canvas.configField.y = canvas.fieldY0;\n          canvas.configField.draggable = true;\n          canvas.configField.dragBoundFunc = function () {\n            return {\n              x: canvas.fieldX0,\n              y: canvas.fieldY0,\n            };\n          };\n        } else if (scaleController.scale > 1) {\n        // 当scale>1时 根据中心坐标为中心，sacle为倍率，能drag并且设置范围限制\n          canvas.configField.draggable = false;        \n          canvas.configField.scaleX = scaleController.scale * canvas.fieldScale0;\n          canvas.configField.scaleY = scaleController.scale * canvas.fieldScale0;\n          canvas.configField.x = scaleController.centerX0 - scaleController.centerX;\n          canvas.configField.y = scaleController.centerY0 - scaleController.centerY;\n        }\n\n        // 设置这次的两指位置作为下次move的参考\n        scaleController.oldDistance = newDistance;\n      } \n    }\n    if (event.changedTouches.length == 1) {\n      // 一个触点是drag\n      if (scaleController.scale == 1) {\n        canvas.configField.draggable = true;\n        canvas.configField.dragBoundFunc = function () {\n          return {\n            x: canvas.fieldX0,\n            y: canvas.fieldY0,\n          };\n        };\n      } else if (scaleController.scale > 1) {\n        canvas.configField.draggable = true;\n        canvas.configField.dragBoundFunc = function (pos) {\n          let newY = pos.y;\n          if (pos.y > canvas.stageHeight*0.3) {\n            newY = canvas.stageHeight*0.3;\n          } else if (pos.y < canvas.stageHeight- canvas.fieldHeight*canvas.configField.scaleY - canvas.stageHeight*0.3) {\n            newY = canvas.stageHeight- canvas.fieldHeight*canvas.configField.scaleY - canvas.stageHeight*0.3;\n          } else {\n            newY = pos.y;\n          }\n          let newX = pos.x;\n          if (pos.x > canvas.stageWidth*0.3) {\n            newX = canvas.stageWidth * 0.3;\n          } else if (pos.x <  canvas.stageWidth- canvas.fieldWidth*canvas.configField.scaleX - canvas.stageWidth*0.3) {\n            newX =  canvas.stageWidth- canvas.fieldWidth*canvas.configField.scaleX - canvas.stageWidth*0.3 ;\n          } else {\n            newX = pos.x;\n          }    \n          return {\n            x: newX,\n            y: newY\n          };\n\n        };        \n      }\n\n    }\n\n\n  }\n}\n\n\n\n// 更新画布\nlet drawCanvas=()=>{\n  // 更新画布时的draw操作\n  // 将[i][j]转换为i*rownum+j\n\n  // 更新整个画布\n  for (let i = 0; i < canvas.squareYnum; i++) {\n    for (let j = 0; j < canvas.squareXnum; j++) {\n      // 更新所有格子颜色\n      canvas.configSquares[i * canvas.squareXnum + j].fill = canvas.squareColor(i,j);\n      // 更新所有格子所属\n      canvas.configSquares[i * canvas.squareXnum + j].occupy = canvas.setOccupy(i, j);\n    }\n  }\n  // 更新最新格子\n    canvas.configSquares[\n      canvas.lastPosition.value[0] * canvas.squareXnum +\n        canvas.lastPosition.value[1]\n    ].stroke = \"rgb(200, 200, 200)\";  \n    canvas.configSquares[\n      canvas.latestPosition.value[0] * canvas.squareXnum +\n        canvas.latestPosition.value[1]\n    ].stroke = \"black\";\n\n  // 最新格子movetoTop\n  stage.value.getStage()\n  .find(`.square${canvas.latestPosition.value[0] * canvas.squareXnum + canvas.latestPosition.value[1]}`)[0]\n  .moveToTop();\n};\n\nlet updateCanvas=()=>{\n  // 请求canvas\n  axios\n    .get(`/canvas`)\n    .then((res) => {\n      canvas.canvasState.value = res.data.canvas;\n      canvas.lastPosition.value = canvas.latestPosition.value;\n      canvas.group1Num.value = res.data.pixels_num.group_1;\n      canvas.group2Num.value = res.data.pixels_num.group_2;\n\n      canvas.latestPosition.value = res.data.last_paint.pixel_position;\n      console.log(canvas.canvasState.value); \n\n      drawCanvas();\n      console.log(\"成功刷新画布\");\n    })\n    .catch((res) => {\n      console.log(\"发生错误\",res);\n    });\n};\n\n// 每隔20s获取并刷新canvs数据\nsetInterval(updateCanvas, 20000);// setInterval里的函数不要用this\n\n// 成功涂色时刷新canvas数据\nwatch(refresh, (newval) => {\n  if (newval == true) {\n    updateCanvas();\n    emit(\"changeRefresh\", false);\n  }\n})\n\nlet saveSquare = {\n  squareName:\"square0\",\n  stroke: \"rgb(200, 200, 200)\",\n  strokeWidth: 2,\n};\n\n\n// 改变模式\n// let changeModeTo0 = () => {\n//   if (mode.value == 1) {\n//     emit(\"changeMode\", 0);\n//   }\n// };\nlet changeModeTo2 = () => {\n  if (mode.value == 1) {\n    emit(\"changeMode\", 2);\n  }\n};\n\n// mode切换 改变方格边框\nwatch(mode, (newval,oldval) => { \n  if (newval == 1) {\n    for (let i = 0; i < canvas.squareYnum; i++) {\n      for (let j = 0; j < canvas.squareXnum; j++) {\n        if (canvas.configSquares[i * canvas.squareXnum + j].occupy != 3) {\n          // 非镂空格子\n          canvas.configSquares[i*canvas.squareXnum+j].strokeWidth = 2;          \n        } else if (canvas.configSquares[i * canvas.squareXnum + j].occupy == 3) {\n          // 镂空格子将其图层移动到底部，防止边缘格子边框显示错误\n            stage.value.getStage()\n            .find(`.square${i * canvas.squareXnum + j}`)[0]\n            .moveToBottom();\n        }\n      }\n    }\n\n    // let FieldContext = Field.value.getNode().children[26];\n    // FieldContext.moveToTop();\n    // console.log(FieldContext);  \n    // stage.value.getStage().find(\".square26\")[0].moveToTop();\n  \n  } else if (newval == 0) {\n\n    for (let i = 0; i < canvas.squareYnum; i++) {\n      for (let j = 0; j < canvas.squareXnum; j++) {\n        if (canvas.configSquares[i * canvas.squareXnum + j].occupy != 3) {\n          canvas.configSquares[i*canvas.squareXnum+j].strokeWidth = 0;          \n        }        \n      }\n    }\n\n  }\n  if (newval == 1 && oldval == 2) {\n    // 涂色失败返回来\n    let target = stage.value.getStage().find(`.${saveSquare.squareName}`)[0];\n    target.attrs.strokeWidth = saveSquare.strokeWidth;\n    target.attrs.stroke = saveSquare.stroke;\n    // console.log(\"涂色失败时latest\",target.attrs.stroke); \n    // 神奇的bug，注释掉if就能让latest变回黑色\n    // if (target.attrs.stroke != \"black\") {\n      target.moveToBottom();      \n    // }    \n  }\n});\n\n\n// 涂色事件  其实是在点击的位置post group\n// mode ,   user.group ,  canvas.postDrawed\n\n\nlet colorEvent = function (event) {\n  console.log(\"点击了这个格子\", event.target.attrs.occupy);\n  if (user.group.value != event.target.attrs.occupy && event.target.attrs.occupy!=3) {\n    if (mode.value == 1 || mode.value ==2) {\n      // 在这里涂色    \n      // 获得位置信息\n      let name = event.target.attrs.name;\n      let id = name.slice(6);\n      console.log(\"click this \", id);\n      let i = Math.floor(id / canvas.squareXnum);\n      let j = id % canvas.squareXnum;\n      let targetSquare = [];\n      targetSquare.push(i);\n      targetSquare.push(j);\n      console.log(targetSquare);    \n      // 标记选中格子\n      canvas.targetSquare.value = targetSquare;\n      \n\n\n      changeModeTo2();\n\n      // 将上一个恢复平常\n      let lastTarget = stage.value.getStage().find(`.${saveSquare.squareName}`)[0];\n      lastTarget.attrs.strokeWidth = saveSquare.strokeWidth;\n      lastTarget.attrs.stroke = saveSquare.stroke;\n      if (lastTarget.attrs.stroke != \"black\") {\n        lastTarget.moveToBottom();      \n      }\n\n\n      // 存储当前\n      let target = stage.value.getStage().find(`.${name}`)[0];    \n      saveSquare.squareName = target.attrs.name;\n      saveSquare.stroke = target.attrs.stroke;\n      saveSquare.strokeWidth = target.attrs.strokeWidth;\n      console.log(\"保存当前的stroke\",saveSquare.stroke)\n\n      // 操作当前\n      target.moveToTop();    \n      target.attrs.strokeWidth = 6;\n      target.attrs.stroke = \"rgb(200, 200, 200)\";\n\n\n\n    } else if (mode.value == 0) {\n      console.log(\"modevalue is 0 fail to draw\");\n    }    \n  }\n\n}\n\n\n\n\n\n// !!!!!!如果config对象某个属性的值没变，那么这个值相关就不会重新渲染\n// 就是缩放前后设置的x和y没变的话，即使实际拖拽x和y改变了，也不会重新渲染x和y\n</script>\n\n<style scoped>\n#canvasContainer {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-image: url(\"@/assets/iamge/border102.png\");\n  background-size: 100% 100%;\n  padding: 8px;\n} \n\n</style>\n","import script from \"./mainCanvas.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./mainCanvas.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./mainCanvas.vue?vue&type=style&index=0&id=8611dd9c&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\MyWeb\\\\byproject\\\\bypixel\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-8611dd9c\"]])\n\nexport default __exports__","<template>\r\n<div class=\"situation\">\r\n  <div class=\"scoreBar\">\r\n    <div class=\"gridBorder\"></div>    \r\n    <div class=\"scoreTitle\">已涂色块数目</div>\r\n    <div class=\"scoreBox\">\r\n      <div class=\"scoreGroup\">\r\n        <div class=\"groupName\">射日队</div>\r\n        <div class=\"groupImg\"><img src=\"@/assets/iamge/yellowlogo.png\"/></div>\r\n        <div class=\"groupNum\">{{canvas.group2Num}}</div>\r\n      </div>\r\n      <div class=\"vs\">VS</div>\r\n      <div class=\"scoreGroup\">\r\n        <div class=\"groupName\">偷瓜队</div>\r\n        <div class=\"groupImg\"><img src=\"@/assets/iamge/greenlogo.png\"/></div>\r\n        <div class=\"groupNum\">{{canvas.group1Num}}</div>        \r\n      </div>\r\n    </div>\r\n    <div class=\"gridBorder\"></div>\r\n  </div>\r\n  \r\n  <div class=\"wholeView\">\r\n    <div  id=\"canvasContainer\">\r\n      <v-stage ref=\"stage\" :config = \"configKonva\" >\r\n        <v-layer ref=\"layer\" :config=\"configLayer\">\r\n          <v-group ref=\"Field\" :config=\"configField\">\r\n            <v-rect v-for=\"(square, index) in configSquares \" :key=\"index\" :config=\"square\"/>          \r\n          </v-group>\r\n        </v-layer>\r\n      </v-stage>\r\n    </div> \r\n    <div class=\"clickToFade\"  @click=\"fade\"></div> \r\n  </div>\r\n  <div class=\"bottomBar\">\r\n    <div class=\"gridBorder\"></div>\r\n    <div class=\"scrollBar\">\r\n      <p class=\"animate\">射日队已完成拼图!</p>\r\n    </div>     \r\n    <div class=\"gridBorder\"></div>\r\n  </div>\r\n\r\n  <footerAD></footerAD> \r\n  \r\n</div>\r\n\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive  } from \"vue\";\r\nimport canvas from \"../../modules/canvasState\";\r\nimport footerAD from \"../footerAD.vue\"\r\nimport { toRefs, defineProps, defineEmits,watch } from 'vue';\r\n\r\nlet props = defineProps({\r\n  showSit: {\r\n    type: Boolean,\r\n  },\r\n})\r\nlet { showSit } = toRefs(props);\r\n\r\n\r\nlet emit = defineEmits(['changeShowSit']);\r\n\r\n\r\n\r\n// 画布缩放\r\nlet configLayer = reactive({\r\n  scaleX:1,\r\n  scaleY:1,\r\n})\r\nlet configSquares = [];\r\n// square原稿大小\r\nfor (let i of canvas.configSquares) {\r\n  configSquares.push({\r\n    x: i.x,\r\n    y: i.y,\r\n    width: i.width,\r\n    height: i.height,\r\n    fill: i.fill,    \r\n  })\r\n}\r\n\r\nlet copyConfigSquares = () => {\r\n  for (let i of canvas.configSquares) {\r\n    configSquares.fill = i.fill;  \r\n\r\n  }  \r\n}\r\n\r\nlet configField = {\r\n  x:0,\r\n  y:0,\r\n  scaleX:canvas.configField.scaleX,\r\n  scaleY: canvas.configField.scaleX,\r\n};\r\nlet configKonva = {\r\n  width: canvas.fieldWidth*canvas.fieldScale0,\r\n  height: canvas.fieldHeight*canvas.fieldScale0,\r\n};\r\n\r\nwatch(showSit, (newval) => {\r\n  if (newval == true) {\r\n    // 同步\r\n    copyConfigSquares();\r\n    console.log(\"战况页面更新\");\r\n    let popup = document.querySelector(\".popupSituation\");\r\n    popup.style.display = \"flex\";\r\n    emit(\"changeShowSit\", false);\r\n  }\r\n})\r\n\r\n\r\n\r\nlet fade = () => {\r\n  let popup = document.querySelector(\".popupSituation\");\r\n  popup.style.display = \"none\";\r\n}\r\n\r\n\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.situation {\r\n  width: 100vw;\r\n  height: 100%;\r\n  /* position: absolute; */\r\n  /* background-color: antiquewhite; */\r\n}\r\n.scoreBar {\r\n  width: 100vw;\r\n  height: 24vh;\r\n  /* border-top: 2px solid black; */\r\n  /* border-bottom: 2px solid black; */\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.scoreTitle {\r\n  width: 40%;\r\n  height:20%;\r\n  margin-top: 5px;\r\n  border: 2px solid black;\r\n  font-size: 24px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;  \r\n  background-color: #ffffff;\r\n  border-radius: 2px;\r\n}\r\n.scoreBox {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-evenly;\r\n  align-items: center; \r\n  flex-grow: 1; \r\n  width: 100%;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.vs {\r\n  font-size: 40px;\r\n}\r\n\r\n.scoreGroup {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  align-items: center; \r\n  height: 100%;\r\n  width: 80px;\r\n\r\n}\r\n\r\n/* .groupName {\r\n\r\n} */\r\n\r\n.groupImg {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.groupImg img {\r\n  width: 75%;\r\n}\r\n/* \r\n.groupNum{\r\n\r\n} */\r\n\r\n\r\n.wholeView {\r\n  /* background-color: rgb(255, 255, 255); */\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  /* max-height: 50vh; */\r\n}\r\n\r\n\r\n\r\n#canvasContainer {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-image: url(\"@/assets/iamge/border202.png\");\r\n  background-size:  100% 100%;\r\n  background-repeat: no-repeat;\r\n  margin-top: 10px;\r\n  padding: 10px;\r\n}\r\n\r\n.clickToFade {\r\n  position: absolute;\r\n  z-index: 10;\r\n  width: 100vw;\r\n  height: 100%;\r\n  background-color: transparent;\r\n}\r\n\r\n\r\n.bottomBar {\r\n  margin-top: 10px;\r\n}\r\n\r\n.gridBorder {\r\n  height: 10px;\r\n  width: 100vw;\r\n  background-image: url(\"@/assets/iamge/gridBorder.png\");\r\n  background-size: 100% 100% ;\r\n}\r\n\r\n\r\n.scrollBar {\r\n  width: 100vw;\r\n  height: 45px;\r\n  margin: 0;\r\n  /* border-top: 2px solid black; */\r\n  /* border-bottom: 2px solid black; */\r\n  overflow: hidden;\r\n  background-color: white;\r\n\r\n}\r\n\r\n.animate {\r\n    font-size: 20px;\r\n    margin: 0;\r\n    line-height: 45px;\r\n    color: #000;\r\n    display: inline-block;\r\n    white-space: nowrap;\r\n    animation: 8s wordsLoop linear infinite normal;\r\n}\r\n\r\n@keyframes wordsLoop {\r\n    0% {\r\n        transform: translateX(140%);\r\n        -webkit-transform: translateX(140%);\r\n    }\r\n    100% {\r\n        transform: translateX(-100%);\r\n        -webkit-transform: translateX(-100%);\r\n    }\r\n}\r\n\r\n@-webkit-keyframes wordsLoop {\r\n    0% {\r\n        transform: translateX(100%);\r\n        -webkit-transform: translateX(100%);\r\n    }\r\n    100% {\r\n        transform: translateX(-100%);\r\n        -webkit-transform: translateX(-100%);\r\n    }\r\n}\r\n\r\n\r\n</style>","import script from \"./situation.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./situation.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./situation.vue?vue&type=style&index=0&id=9e097a94&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\MyWeb\\\\byproject\\\\bypixel\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-9e097a94\"]])\n\nexport default __exports__","<template>\r\n<div class=\"bar\" >\r\n  <div class=\"btnBox\">\r\n    <div class=\"btn btnleft\"  @click=\"popSituation\">战况</div>\r\n    <div class=\"btncenter\" @click=\"changeMode\">\r\n    <div id=\"drawBtn\" class=\"btncenterChange\" >{{drawBtnText}}</div>\r\n    </div>\r\n    <div class=\"btn btnright\"  @click=\"popTask\">任务</div>        \r\n  </div>    \r\n\r\n\r\n\r\n</div>\r\n\r\n<!-- 任务弹窗 -->\r\n<div class=\"popupTask\" @click=\"fadeTask\">\r\n  <div class=\"taskWindow\" @click.stop=\"null\">\r\n  <h2>任务</h2>\r\n  <p>{{taskText}}</p>  \r\n  </div>\r\n</div>\r\n\r\n<!-- 战况弹窗 -->\r\n<div class=\"popupSituation\"  @click=\"fadeSituation\">\r\n  <situation :showSit=\"showSit\" @changeShowSit=\"changeShowSit\"></situation>\r\n</div>\r\n\r\n<!-- 涂色成功，涂色冲突失败，涂色冷却中 -->\r\n<div class=\"popupTips\">\r\n  <div class=\"tipsText\">{{tipsText}}</div>\r\n</div>\r\n\r\n</template>\r\n\r\n<script setup>\r\nimport axios from 'axios';\r\nimport { toRefs, defineProps, defineEmits,watch,ref } from 'vue';\r\nimport user from \"../../modules/userState\";\r\nimport canvas from \"../../modules/canvasState\";\r\nimport situation from \"./situation.vue\";\r\nimport cdtime from \"../../modules/cdtime\";\r\n\r\nlet props = defineProps({\r\n  mode: {\r\n    type: Number,\r\n  },\r\n  refresh: {\r\n    type: Boolean,\r\n  },  \r\n})\r\nlet { mode } = toRefs(props);\r\n// 设置颜色\r\nlet drawColor;\r\nif (user.group.value == 1) {\r\n  drawColor = \"#00d599\";\r\n} else if (user.group.value == 2) {\r\n  drawColor = \"#ffc500\";  \r\n} \r\n\r\n// 设置cdtime\r\nlet drawBtnText = ref(\"\");\r\nif (user.CDtime.value <= 0) {\r\n  drawBtnText.value = \"涂色\";\r\n} else if (user.CDtime.value > 0) {\r\n    let CDTimeM = ref(Math.floor(user.CDtime.value / 60));\r\n    let CDTimeS = ref(user.CDtime.value % 60);\r\n    if (CDTimeS.value < 10) {\r\n      CDTimeS.value = `0${CDTimeS.value}`;\r\n    }\r\n    drawBtnText.value = `${CDTimeM.value}:${CDTimeS.value}`;  \r\n}\r\n\r\n// cdtime实时更新显示\r\nwatch(user.CDtime, (newval) => {\r\n  if (newval == 0 ||newval<0) {\r\n    drawBtnText.value = \"涂色\";\r\n  } else {\r\n    let CDTimeM = ref(Math.floor(user.CDtime.value / 60));\r\n    let CDTimeS = ref(user.CDtime.value % 60);\r\n    if (CDTimeS.value < 10) {\r\n      CDTimeS.value = `0${CDTimeS.value}`;\r\n    }\r\n    drawBtnText.value = `${CDTimeM.value}:${CDTimeS.value}`;\r\n  }\r\n  \r\n})\r\n\r\n// 涂色成功、失败、冷却提示\r\nlet tipsText = ref(\"\");\r\nlet popTips = function (text) {\r\n  tipsText.value = text;\r\n  let tips = document.querySelector(\".popupTips\");\r\n  tips.className=\"popupTips scale-in-center\"\r\n  setTimeout(() => {\r\n    tips.className = \"popupTips scale-out-center\";\r\n  }, 2000);\r\n}\r\n\r\n\r\nlet emit = defineEmits(['changeMode', \"changeRefresh\"]);\r\nlet changeMode = () => {\r\n  if (mode.value == 1) {\r\n    \r\n    emit(\"changeMode\", 0);  \r\n  } else if (mode.value == 0) {\r\n    // 请求是否能涂色\r\n    axios.get(`/user/state`).then((res) => {\r\n      console.log(res);\r\n      if (res.data.state == true && user.CDtime.value<=0) {\r\n        emit(\"changeMode\", 1);          \r\n      } else {\r\n        popTips(\"每位玩家每小时只能涂色一次！\");\r\n      }\r\n    }).catch((res) => {\r\n      console.log(res);\r\n    })\r\n  } else if (mode.value == 2) {\r\n    // 发送涂色：选中的格子\r\n    let config = {\r\n      data: {\r\n        position: canvas.targetSquare.value,\r\n      }\r\n    };\r\n    let drawurl = `/canvas`;\r\n    if (process.env.VUE_APP_develope == \"true\") {\r\n      drawurl = `/canvaspost`;\r\n    }\r\n    axios.post(drawurl, config).then((res) => {\r\n      console.log(res);\r\n      // 成功涂色就  弹窗成功，回到mode0，请求画布并更新，请求冷却时间\r\n      if (res.data.conflicting == false && res.data.cooling == false) {\r\n        popTips(\"涂色成功！\");\r\n        // console.log(\"涂色成功！\");\r\n        emit(\"changeMode\", 0); \r\n        emit(\"changeRefresh\", true);\r\n        cdtime.getCDtime();\r\n        // 更新个人等级\r\n        if (res.data.is_user_upgraded == true) {\r\n          user.level.value = res.data.user_level;\r\n        }\r\n        // 更新队伍等级\r\n        if (res.data.is_group_upgraded == true) {\r\n          if (user.group.value == 1) {\r\n            canvas.group1Level.value = res.data.group_level;\r\n          }\r\n          if (user.group.value == 2) {\r\n            canvas.group2Level.value = res.data.group_level;\r\n          }          \r\n          user.groupLevel.value = res.data.group_level;\r\n        }        \r\n\r\n      } else {\r\n        // 涂色失败就  弹窗失败， 回到mode1,请求画布并更新\r\n        if (res.data.conflicting == true) {\r\n          popTips(\"你选择的方格已被你的阵营涂色，请重新选择！\");\r\n          // console.log(\"涂色失败，你选择的方格已被你的阵营涂色\");\r\n        } else if (res.data.cooling == true) {\r\n          popTips(\"涂色失败，请重试！\")\r\n          // console.log(\"涂色失败，同用户一小时内只能涂色一次\");\r\n        }\r\n        emit(\"changeMode\", 1);       \r\n        emit(\"changeRefresh\",true);          \r\n      }\r\n\r\n    }).catch((res) => {\r\n      console.log(res);\r\n    });\r\n  }\r\n\r\n}\r\n\r\n// 监视mode改变时改涂色框的颜色\r\nwatch(mode, (newval,oldval) => {\r\n  const drawBtn = document.querySelector(\"#drawBtn\");  \r\n  console.log(\"mode change \", newval);\r\n  if (newval == 1&&oldval ==0) {\r\n    drawBtn.style.backgroundColor = drawColor;    \r\n    drawBtnText.value = \"涂色\";\r\n  } else if (newval == 0&&oldval==1) {\r\n    drawBtn.style.backgroundColor = \"rgb(225, 225, 225)\";   \r\n    drawBtnText.value = \"涂色\";\r\n  } else if (newval == 2) {\r\n    drawBtnText.value = \"确认\";\r\n  } else if (newval == 0&&oldval == 2) {\r\n    drawBtn.style.backgroundColor = \"rgb(225, 225, 225)\";\r\n    drawBtnText.value = \"涂色\";          \r\n  } else if (newval == 1 && oldval == 2) {\r\n    drawBtnText.value = \"涂色\";      \r\n  }\r\n});\r\n\r\n// watch(refresh, (newval) => {\r\n//   // const drawBtn = document.querySelector(\"#drawBtn\");  \r\n//   if (newval == true) {\r\n//     // console.log(111)\r\n//     // drawBtn.style.height = \"90px\";    \r\n//     // drawBtn.style.width = \"90px\";    \r\n//     // drawBtn.style.lineHeight = \"90px\";    \r\n//     // drawBtn.style.borderRadius = \"45px\";        \r\n//   } else if (newval == false) {\r\n//     setTimeout(() => {\r\n//       // drawBtn.style.height = \"76px\";    \r\n//       // drawBtn.style.width = \"76px\";    \r\n//       // drawBtn.style.lineHeight = \"76px\"; \r\n//       // drawBtn.style.borderRadius = \"38px\"; \r\n//     }, 500);\r\n    \r\n//   }\r\n// })\r\n\r\n// 任务\r\nlet popTask = ()=>{\r\n  let popup = document.querySelector(\".popupTask\");\r\n  popup.style.display = \"flex\";\r\n}\r\nlet fadeTask = () => {\r\n  let popup = document.querySelector(\".popupTask\");\r\n  popup.style.display = \"none\";  \r\n}\r\nlet taskText = ref(\"默认文字\");\r\n// 打开主页面时获取任务\r\naxios.get(`/task`).then((res) => {\r\n  console.log(\"获取任务\", res);\r\n  taskText.value = res.data.task;\r\n}).catch((res) => {\r\n  console.log(res);\r\n})\r\n\r\n\r\n// 战况\r\nlet showSit = ref(false);\r\nlet changeShowSit = (val) => {\r\n  showSit.value = val;\r\n}\r\nlet popSituation = () => {\r\n  // 战况页面与主页面同步一下\r\n  changeShowSit(true);\r\n  // 在situation组件里控制显示\r\n}\r\nlet fadeSituation = () => {\r\n  let popup = document.querySelector(\".popupSituation\");\r\n  popup.style.display = \"none\";  \r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.bar {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 100%;\r\n  flex-grow: 1;\r\n  /* position: relative; */\r\n}\r\n\r\n.btnBox {\r\n  /* position: absolute; */\r\n  /* border: 4px solid black; */\r\n  width: 80vw;\r\n  height: 85px;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  background-image: url(\"@/assets/iamge/controllera.png\");\r\n  background-size:  100% 100%;\r\n  background-repeat: no-repeat;\r\n  /* filter: grayscale(100%); */\r\n}\r\n\r\n.btn{\r\n  /* border: 3px solid black; */\r\n  z-index: 1;\r\n  width: 32vw;\r\n  height: 12vw;\r\n  line-height: 12vw;\r\n  text-align: center;\r\n  font-size: 20px;\r\n  background-color: rgba(255, 255, 255, 0);\r\n  border-radius: 4px;\r\n}\r\n\r\n.btncenter {\r\n  position: absolute;\r\n  z-index: 2;\r\n  height: 92px;\r\n  width: 92px;  \r\n  /* border: 4px solid black; */\r\n  /* border-radius: 49px; */\r\n  /* background-color: rgba(255, 255, 255, 0); */\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-image: url(\"@/assets/iamge/controllerb.png\");\r\n  background-size:  100% ;\r\n  background-repeat: no-repeat;\r\n}\r\n\r\n.btncenterChange {\r\n  background-color: rgb(225, 225, 225);\r\n  height: 74px;\r\n  width: 74px;   \r\n  line-height: 74px;  \r\n  font-size: 24px;  \r\n  border-radius: 37px;  \r\n  text-align: center;\r\n  transition: .5s;\r\n}\r\n\r\n.btnleft {\r\n  margin-right: 30px;\r\n}\r\n\r\n\r\n.btnright {\r\n  margin-left: 30px;\r\n}\r\n\r\n\r\n.popupTask {\r\n  display: none;\r\n  justify-content: center;\r\n  align-items: center;\r\n  position: absolute;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  background-color: rgba(0, 0, 0, 0.448);\r\n  z-index: 10;\r\n}\r\n\r\n.taskWindow{\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  width: 70vw;\r\n  height: 50vh;\r\n  background-color: white;\r\n  border: 4px solid black;\r\n  padding: 10px;\r\n  font-size: 20px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.taskWindow h2 {\r\n  margin: 0;\r\n}\r\n\r\n.popupSituation {\r\n  display: none;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  position: absolute;\r\n  top: 0; \r\n  /* 让它从网页的top 0 开始 */\r\n  width: 100vw;\r\n  height: 100vh;\r\n  z-index: 10;\r\n  background-image: url(\"@/assets/iamge/background.jpg\");\r\n  background-size: 100vw;\r\n  background-repeat: repeat-y;\r\n}\r\n\r\n.popupTips{\r\n  position: absolute;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  visibility: hidden;\r\n  width: 200px;\r\n  height: 60px;\r\n  border: 3px solid black;\r\n  /* border-radius: 2px; */\r\n  background-color: rgb(255, 255, 255);\r\n  top: 450px;\r\n  transition: all .5s;\r\n  opacity: 0;\r\n  padding: 5px;\r\n  z-index: -1;\r\n}\r\n\r\n/* .popanime {\r\n  z-index: 10;\r\n  visibility: visible;  \r\n  opacity: 1;\r\n  transition: all .5s;\r\n} */\r\n\r\n.scale-in-center {\r\n  z-index: 10;\r\n  visibility: visible;  \r\n  opacity: 1;\r\n\t-webkit-animation: scale-in-center 0.5s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;\r\n  animation: scale-in-center 0.5s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;\r\n}\r\n\r\n@-webkit-keyframes scale-in-center {\r\n  0% {\r\n    -webkit-transform: scale(0);\r\n            transform: scale(0);\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    -webkit-transform: scale(1);\r\n            transform: scale(1);\r\n    opacity: 1;\r\n  }\r\n}\r\n@keyframes scale-in-center {\r\n  0% {\r\n    -webkit-transform: scale(0);\r\n            transform: scale(0);\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    -webkit-transform: scale(1);\r\n            transform: scale(1);\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n.scale-out-center {\r\n  z-index: -1;\r\n  visibility: hidden;  \r\n\t-webkit-animation: scale-out-center 0.3s cubic-bezier(0.550, 0.085, 0.680, 0.530) both;\r\n  animation: scale-out-center 0.3s cubic-bezier(0.550, 0.085, 0.680, 0.530) both;\r\n}\r\n\r\n@-webkit-keyframes scale-out-center {\r\n  0% {\r\n    -webkit-transform: scale(1);\r\n            transform: scale(1);\r\n    opacity: 1;\r\n  }\r\n  60% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    -webkit-transform: scale(0);\r\n            transform: scale(0);\r\n    opacity: 0;\r\n  }\r\n}\r\n@keyframes scale-out-center {\r\n  0% {\r\n    -webkit-transform: scale(1);\r\n            transform: scale(1);\r\n    opacity: 1;\r\n  }\r\n  60% {\r\n    opacity: 0;    \r\n  }\r\n  100% {\r\n    -webkit-transform: scale(0);\r\n            transform: scale(0);\r\n    opacity: 0;\r\n  }\r\n}\r\n\r\n.tipsText {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n</style>","import script from \"./bottomBar.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./bottomBar.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./bottomBar.vue?vue&type=style&index=0&id=43ba62a6&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\MyWeb\\\\byproject\\\\bypixel\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-43ba62a6\"]])\n\nexport default __exports__","<template>\r\n<div class=\"infoBox\">\r\n  <div class=\"userInfo\">\r\n    <div class=\"infoImg\">\r\n      <img class=\"userImg\" :src=\"user.userImg\" />\r\n      <div class=\"headFrame\" v-if=\"showFrame\" ><img class=\"frameImg\" :src=\"logo\"/></div>\r\n    </div>\r\n    <div class=\"infoText\" @click=\"pop\"><p>{{user.userName.value}}</p></div>\r\n  </div>\r\n\r\n  <div class=\"groupLogo\"><img :src=\"logo\" /></div>\r\n</div>\r\n\r\n<!-- 点称号显示弹窗 -->\r\n<div class=\"popup\" @click=\"fade\">\r\n  <div class=\"window\" @click.stop=\"null\">文字文字文字文字文字</div>\r\n</div>\r\n\r\n</template>\r\n\r\n<script setup>\r\nimport { toRefs,defineProps,watch,ref } from \"vue\";\r\nimport user from \"../../modules/userState\";\r\nimport canvas from \"../../modules/canvasState\";\r\nconst props = defineProps({\r\n  logo: {},img:{}\r\n});\r\nconst {logo,img} = toRefs(props);\r\n// console.log(logo.value);\r\n// console.log(props.logo);\r\n// console.log(props.img);\r\nconsole.log(img.value);\r\n\r\nlet pop = ()=>{\r\n  let popup = document.querySelector(\".popup\");\r\n  popup.style.display = \"flex\";\r\n}\r\nlet fade = () => {\r\n  let popup = document.querySelector(\".popup\");\r\n  popup.style.display = \"none\";  \r\n}\r\n\r\n\r\n//\r\n// 设置user的队伍等级\r\nif (user.group.value == 1) {\r\n  user.groupLevel.value = canvas.group1Level.value;  \r\n}else if (user.group.value == 2) {\r\n  user.groupLevel.value = canvas.group1Level.value;  \r\n}\r\n// 根据队伍等级设置头像框\r\nlet showFrame = ref(false);\r\nif (user.groupLevel.value > 1) {\r\n  showFrame.value = true;\r\n}\r\n// 监视队伍升级\r\nwatch(user.groupLevel, (newval) => {\r\n  if (newval > 1) {\r\n  showFrame.value = true; \r\n  }\r\n})\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.infoBox {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  height: 18%; \r\n  width: 90%;\r\n}\r\n\r\n.userInfo {\r\n  display: flex;\r\n  flex-direction: row;\r\n  border: 2px solid black;\r\n}\r\n.infoImg {\r\n  height: 50px;\r\n  width: 50px;\r\n  border-right: 2px solid black;\r\n  position: relative;\r\n}\r\n\r\n.userImg {\r\n  height: 100%;\r\n\r\n}\r\n\r\n\r\n.headFrame{\r\n  position: absolute;\r\n  height: 50px;\r\n  width: 50px;\r\n  top: 0;\r\n}\r\n\r\n.frameImg {\r\n  height: 100%;\r\n}\r\n\r\n.infoText {\r\n  height: 50px;\r\n  width: 140px;\r\n  background-color: rgb(244, 244, 244);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  overflow: hidden;\r\n}\r\n\r\n.infoText p {\r\n  margin: 0px;\r\n  padding: 0px;\r\n}\r\n\r\n\r\n.groupLogo {\r\n  width: 20%;\r\n}\r\n\r\n.groupLogo img {\r\n  width: 100%;\r\n}\r\n\r\n.popup {\r\n  display: none;\r\n  justify-content: center;\r\n  align-items: center;\r\n  position: absolute;\r\n  width: 100vw;\r\n  height: 150vh;\r\n  background-color: rgba(0, 0, 0, 0.448);\r\n  z-index: 10;\r\n}\r\n\r\n.window{\r\n  width: 70vw;\r\n  height: 50vh;\r\n  background-color: white;\r\n  border: 4px solid black;\r\n  padding: 10px;\r\n  font-size: 20px;\r\n  border-radius: 4px;\r\n}\r\n\r\n</style>\r\n","import script from \"./topUserInfo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./topUserInfo.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./topUserInfo.vue?vue&type=style&index=0&id=52f43891&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\MyWeb\\\\byproject\\\\bypixel\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-52f43891\"]])\n\nexport default __exports__","<template>\r\n<div class=\"gameView\">\r\n  <div class=\"game\">\r\n    <topUserInfo :logo=\"topLogoImg\" :img=\"require(`@/assets/iamge/greenlogo.png`)\"></topUserInfo>\r\n    <mainCanvas :mode=\"mode\" :refresh=\"refresh\" @changeMode=\"changeMode\" @changeRefresh=\"changeRefresh\" ></mainCanvas>    \r\n    <bottomBar :mode=\"mode\" :refresh=\"refresh\" @changeMode=\"changeMode\" @changeRefresh=\"changeRefresh\" ></bottomBar>    \r\n  </div>\r\n  \r\n\r\n  <footerAD></footerAD>  \r\n</div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\";\r\nimport mainCanvas from '../components/gameView/mainCanvas.vue'\r\nimport bottomBar from '../components/gameView/bottomBar.vue'\r\nimport topUserInfo from '../components/gameView/topUserInfo.vue'\r\nimport footerAD from \"../components/footerAD.vue\"\r\nimport user from \"@/modules/userState\"\r\nimport router from \"@/router\";\r\n// import \"../request/axios\"\r\n\r\n\r\nlet mode = ref(0);\r\nlet refresh = ref(false);\r\n// mode控制涂色，mode1能涂色，mode0不能\r\n// refresh == true 时刷新画布\r\nlet changeMode = (num) => {\r\n  mode.value = num;\r\n  console.log(\"change mode to \", mode.value);\r\n};\r\nlet changeRefresh = (val) => {\r\n  refresh.value = val;\r\n};\r\n\r\n\r\n// top的logo根据阵营显示\r\nlet topLogoImg = ref(null);\r\nconsole.log(\"在gameView时的group\", user.group.value);\r\n\r\n// 没有group就跳回loading\r\nif (user.group.value == 0) {\r\n  router.replace(\"/loading\");\r\n} else if (user.group.value == 1) {\r\n  topLogoImg.value = require(`@/assets/iamge/greenlogo.png`);\r\n} else if (user.group.value == 2) {\r\n  topLogoImg.value = require(`@/assets/iamge/yellowlogo.png`);  \r\n}\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.gameView {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-image: url(\"@/assets/iamge/background.jpg\");\r\n  background-size: 100vw;\r\n  position: relative;\r\n\r\n}\r\n\r\n.game {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-evenly;\r\n  align-items: center;\r\n  flex-grow: 1;  \r\n  /* position: relative; */\r\n}\r\n</style>\r\n","import script from \"./gameView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./gameView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./gameView.vue?vue&type=style&index=0&id=2e7906b6&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\MyWeb\\\\byproject\\\\bypixel\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2e7906b6\"]])\n\nexport default __exports__"],"names":["mode","refresh","toRefs","props","console","log","value","configLayer","reactive","scaleX","scaleY","canvas","configKonva","configField","configSquares","cc","ref","stage","Field","onMounted","getStage","find","moveToTop","scaleController","scale","centerX0","centerY0","centerX","centerY","oldDistance","getDistance","a","b","Math","hypot","x","y","getCenter","scaleStart","event","undefined","evt","touches","length","clientX","clientY","distance","center","stageX","document","querySelector","getBoundingClientRect","stageY","scaleEnd","scaleMove","changedTouches","newDistance","scrollSpeed","ratio","pos","newY","newX","drawCanvas","i","j","fill","occupy","stroke","updateCanvas","axios","then","res","data","pixels_num","group_1","group_2","last_paint","pixel_position","catch","setInterval","watch","newval","emit","saveSquare","squareName","strokeWidth","changeModeTo2","oldval","moveToBottom","target","attrs","colorEvent","user","name","id","slice","floor","targetSquare","push","lastTarget","__exports__","showSit","width","height","copyConfigSquares","popup","style","display","fade","drawColor","drawBtnText","CDTimeM","CDTimeS","tipsText","popTips","text","tips","className","setTimeout","changeMode","state","config","position","drawurl","process","VUE_APP_develope","conflicting","cooling","cdtime","is_user_upgraded","user_level","is_group_upgraded","group_level","drawBtn","backgroundColor","popTask","fadeTask","taskText","task","changeShowSit","val","popSituation","fadeSituation","logo","img","pop","showFrame","num","changeRefresh","topLogoImg","router","require"],"sourceRoot":""}