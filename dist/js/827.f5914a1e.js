"use strict";(self["webpackChunkbypixel"]=self["webpackChunkbypixel"]||[]).push([[827],{5827:function(e,a,l){l.r(a),l.d(a,{default:function(){return Ve}});var t=l(3396),s=l(4870),o=l(7139),n=l(9242),i=l(3194),u=l(2508),c=l(6963),r=l(4336),d={getCDtime(){r.Z.get("/user/state").then((e=>{if(1==e.data.data.state)console.log("能draw"),i.Z.CDtime.value=0;else if(0==e.data.data.state){console.log("不能draw");let a=e.data.data.last_paint_time;a>16e11&&(a=Math.ceil(a/1e3));let l=300,t=a+l,s=Math.floor(Date.now()/1e3);console.log("下一次",t);let o=t-s<0?0:t-s;(o>=l||o<l-2)&&(o=l-1),i.Z.CDtime.value=o,i.Z.timeGoes()}})).catch((e=>{console.log(e)}))}};const g=e=>((0,t.dD)("data-v-adc65a38"),e=e(),(0,t.Cn)(),e),v={class:"lastPaintBar"},p=["src"],f=["onClick"],m=["src"],Z=g((()=>(0,t._)("div",{class:"shareSaveTips"},"长按图片保存",-1)));var y={__name:"mainCanvas",props:{mode:{type:Number,default:0},refresh:{type:Boolean}},emits:["changeMode","changeRefresh"],setup(e,{emit:a}){const l=e,{mode:g,refresh:y}=(0,s.BK)(l);let h=(0,s.qj)({scaleX:1,scaleY:1}),S="/drill-battle",_=(0,s.iH)("shareIcon.png"),k=(0,s.iH)("");k.value=`${S}/shareImg${i.Z.group.value}.jpg`,console.log("进入主页面且开始初始化数据"),c.Z.initCanvasData();let q=c.Z.configKonva;c.Z.fillConfigKonva();let b=c.Z.configField;c.Z.fillconfigField();let C=c.Z.configSquares;c.Z.fillConfigSquares();let P,T,U=(0,s.iH)(null),w=(0,s.iH)(null),x=(0,s.iH)(null),B={squareName:"square0",squareId:-1,stroke:"#c8c8c8",strokeWidth:1},H=e=>{P=e.target.parent.attrs.x,T=e.target.parent.attrs.y},X=(0,s.qj)({scale:1,centerX0:0,centerY0:0,centerXf:0,centerYf:0,oldDistance:0}),$=(e,a)=>Math.hypot(e.x-a.x,e.y-a.y),M=(e,a)=>({x:(e.x+a.x)/2,y:(e.y+a.y)/2}),D=e=>{if(void 0==e.evt&&2==e.touches.length){let a={x:e.touches[0].clientX,y:e.touches[0].clientY},l={x:e.touches[1].clientX,y:e.touches[1].clientY},t=$(a,l);X.oldDistance=t;let s=M(a,l),o=document.querySelector("#canvasContainer").getBoundingClientRect().x,n=document.querySelector("#canvasContainer").getBoundingClientRect().y;X.centerX0=s.x-o,X.centerY0=s.y-n,X.centerXf=(X.centerX0-P)/X.scale*c.Z.fieldScale0,X.centerYf=(X.centerY0-T)/X.scale*c.Z.fieldScale0}},W=e=>{void 0==e.evt&&(X.oldDistance=0)},Y=e=>{if(void 0==e.evt){if(0!=X.oldDistance&&2==e.changedTouches.length){let a={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY},l={x:e.changedTouches[1].clientX,y:e.changedTouches[1].clientY},t=$(a,l),s=.08*c.Z.squareXnum/25,o=t/X.oldDistance*s;o>1.5*s?o=1.5*s:o<.7*s&&(o=.7*s),o>1*s?X.scale=X.scale+o>4?4:X.scale+o:o<1*s&&(X.scale=X.scale-o>4?4:X.scale-o),X.scale<1&&(X.scale=1),X.scale>4*c.Z.squareXnum/25&&(X.scale=4*c.Z.squareXnum/25),1==X.scale?(c.Z.configField.scaleX=c.Z.fieldScale0,c.Z.configField.scaleY=c.Z.fieldScale0,c.Z.configField.x=c.Z.fieldX0,c.Z.configField.y=c.Z.fieldY0,c.Z.configField.draggable=!0,c.Z.configField.dragBoundFunc=function(){return{x:c.Z.fieldX0,y:c.Z.fieldY0}}):X.scale>1&&(c.Z.configField.draggable=!1,c.Z.configField.scaleX=X.scale*c.Z.fieldScale0,c.Z.configField.scaleY=X.scale*c.Z.fieldScale0,c.Z.configField.x=X.centerX0-X.centerXf*X.scale*c.Z.fieldScale0,c.Z.configField.y=X.centerY0-X.centerYf*X.scale*c.Z.fieldScale0),X.oldDistance=t}1==e.changedTouches.length&&(1==X.scale?(c.Z.configField.draggable=!0,c.Z.configField.dragBoundFunc=function(){return{x:c.Z.fieldX0,y:c.Z.fieldY0}}):X.scale>1&&(c.Z.configField.draggable=!0,c.Z.configField.dragBoundFunc=function(e){let a=e.y;a=e.y>.3*c.Z.stageHeight?.3*c.Z.stageHeight:e.y<c.Z.stageHeight-c.Z.fieldHeight*c.Z.configField.scaleY-.3*c.Z.stageHeight?c.Z.stageHeight-c.Z.fieldHeight*c.Z.configField.scaleY-.3*c.Z.stageHeight:e.y;let l=e.x;return l=e.x>.3*c.Z.stageWidth?.3*c.Z.stageWidth:e.x<c.Z.stageWidth-c.Z.fieldWidth*c.Z.configField.scaleX-.3*c.Z.stageWidth?c.Z.stageWidth-c.Z.fieldWidth*c.Z.configField.scaleX-.3*c.Z.stageWidth:e.x,{x:l,y:a}}))}},I=()=>{console.log("into drawCanvas更新画布");for(let e=0;e<c.Z.squareYnum;e++)for(let a=0;a<c.Z.squareXnum;a++)c.Z.configSquares[e*c.Z.squareXnum+a].fill=c.Z.squareColor(e,a),c.Z.configSquares[e*c.Z.squareXnum+a].occupy=c.Z.setOccupy(e,a);-1!=c.Z.latestPosition.value[0]&&-1!=c.Z.latestPosition.value[1]&&(-1!=c.Z.lastPosition.value[0]&&-1!=c.Z.lastPosition.value[1]&&(c.Z.configSquares[c.Z.lastPosition.value[0]*c.Z.squareXnum+c.Z.lastPosition.value[1]].stroke="rgb(200, 200, 200)"),c.Z.configSquares[c.Z.latestPosition.value[0]*c.Z.squareXnum+c.Z.latestPosition.value[1]].stroke="black",w.value.getStage().find(`.square${c.Z.latestPosition.value[0]*c.Z.squareXnum+c.Z.latestPosition.value[1]}`)[0].moveToTop())},N=()=>{r.Z.get("/canvas").then((e=>{if(c.Z.canvasState.value=e.data.data.canvas,c.Z.canvasState.value.length!=c.Z.squareYnum&&(u.Z.replace("/loading"),location.reload(!0)),c.Z.lastPosition.value=c.Z.latestPosition.value,c.Z.group1Num.value=e.data.data.pixels_num.group_1,c.Z.group2Num.value=e.data.data.pixels_num.group_2,null==e.data.data.last_paint?c.Z.latestPosition.value=[-1,-1]:c.Z.latestPosition.value=e.data.data.last_paint.pixel_position,null!=e.data.data.last_paint){if(console.log("res.data.data.last_paint.time",e.data.data.last_paint.time),console.log("res.data.data.last_paint.nickname",e.data.data.last_paint.nickname),c.Z.lastPaintTime.value==e.data.data.last_paint.time&&c.Z.lastPaintName.value==e.data.data.last_paint.nickname){let a,l=Math.floor(Date.now()/1e3);console.log("跑时间，nowTime",l),a=e.data.data.last_paint.time>16e11?Math.ceil(e.data.data.last_paint.time/1e3):e.data.data.last_paint.time,console.log("跑时间，lastTime",a),c.Z.lastPaintMin.value=Math.floor((l-a)/60),console.log("canvas.lastPaintMin.value",c.Z.lastPaintMin.value)}c.Z.lastPaintTime.value=e.data.data.last_paint.time,c.Z.lastPaintName.value=e.data.data.last_paint.nickname,c.Z.lastPaintGroup.value=e.data.data.last_paint.group,console.log("canvas.lastPaintGroup.value!!",c.Z.lastPaintGroup.value)}else c.Z.lastPaintTime.value=0;I()})).catch((e=>{console.log("请求canvas发生错误：",e)}))};setInterval(N,2e4),(0,t.YP)(y,(e=>{1==e&&(N(),B.squareId=-1,B.squareName="square0",a("changeRefresh",!1))}));let L=()=>{1==g.value&&a("changeMode",2)};(0,t.YP)(g,((e,a)=>{if(1==e)for(let l=0;l<c.Z.squareYnum;l++)for(let e=0;e<c.Z.squareXnum;e++)3!=c.Z.configSquares[l*c.Z.squareXnum+e].occupy?c.Z.configSquares[l*c.Z.squareXnum+e].strokeWidth=1:3==c.Z.configSquares[l*c.Z.squareXnum+e].occupy&&w.value.getStage().find(`.square${l*c.Z.squareXnum+e}`)[0].moveToBottom();else if(0==e)for(let l=0;l<c.Z.squareYnum;l++)for(let e=0;e<c.Z.squareXnum;e++)3!=c.Z.configSquares[l*c.Z.squareXnum+e].occupy&&(c.Z.configSquares[l*c.Z.squareXnum+e].strokeWidth=0);if(1==e&&2==a){let e=w.value.getStage().find(`.${B.squareName}`)[0];e.attrs.strokeWidth=B.strokeWidth,e.attrs.stroke=B.stroke,e.moveToBottom()}}));let F,G,R=function(e){if(1==g.value||2==g.value){if(i.Z.group.value!=e.target.attrs.occupy&&3!=e.target.attrs.occupy){let a=e.target.attrs.name,l=a.slice(6);console.log("click this ",l);let t=Math.floor(l/c.Z.squareXnum),s=l%c.Z.squareXnum,o=[];o.push(t),o.push(s),console.log(o),c.Z.targetSquare.value=o,L();let n=w.value.getStage();if(-1!=B.squareId){console.log("恢复上一个");let e=n.find(`.${B.squareName}`)[0];console.log("lastTarget.attrs",e.attrs),console.log("saveSquare.squareName"),e.attrs.strokeWidth=B.strokeWidth,e.attrs.stroke=B.stroke,"black"!=e.attrs.stroke&&e.moveToBottom();let a=Number(B.squareId)+Number(c.Z.squareXnum);a<c.Z.squareXnum*c.Z.squareYnum&&3==n.find(`.square${a}`)[0].attrs.occupy&&n.find(`.square${a}`)[0].moveToBottom();let l=Number(B.squareId)-Number(c.Z.squareXnum);l>=0&&3==n.find(`.square${l}`)[0].attrs.occupy&&n.find(`.square${l}`)[0].moveToBottom();let t=Number(B.squareId)-1;t>=0&&3==n.find(`.square${t}`)[0].attrs.occupy&&n.find(`.square${t}`)[0].moveToBottom();let s=Number(B.squareId)+1;s<c.Z.squareXnum*c.Z.squareYnum&&3==n.find(`.square${s}`)[0].attrs.occupy&&n.find(`.square${s}`)[0].moveToBottom()}else console.log("初次选择");let i=n.find(`.${a}`)[0];B.squareName=i.attrs.name,B.squareId=l,B.stroke=i.attrs.stroke,B.strokeWidth=i.attrs.strokeWidth,console.log("保存当前的stroke",B.stroke),i.moveToTop(),i.attrs.strokeWidth=3,i.attrs.stroke="#c8c8c8"}}else 0==g.value&&e.evt.changedTouches.length<=1&&0==e.evt.targetTouches.length&&0==i.Z.CDtime.value&&a("changeMode",1)},K=c.Z.lastPaintTime.value,z=c.Z.lastPaintName.value;if(z.length>8&&(z=z.slice(0,8)+"..."),0==K)G="";else if(K>0){K>16e11&&(K=Math.ceil(K/1e3));let e=Math.floor(Date.now()/1e3);F=Math.floor((e-K)/60),F<0&&(F=0);let a=0;F>=60?(a=Math.floor(F/60),F%=60,G=`${a}小时${F}分钟前“${z}”涂色`):G=0==F?`刚刚“${z}”涂色`:`${F}分钟前“${z}”涂色`}let j=(0,s.iH)(G);(0,t.bv)((()=>{-1!=c.Z.latestPosition.value[0]&&-1!=c.Z.latestPosition.value[1]&&w.value.getStage().find(`.square${c.Z.latestPosition.value[0]*c.Z.squareXnum+c.Z.latestPosition.value[1]}`)[0].moveToTop();let e=document.querySelector(".lastPaintBar");console.log("set color :canvas.lastPaintGroup.value",c.Z.lastPaintGroup.value),1==c.Z.lastPaintGroup.value?e.style.backgroundColor="#00d599":2==c.Z.lastPaintGroup.value&&(e.style.backgroundColor="#ffc500"),K>0&&(document.querySelector(".lastPaintBar").className="lastPaintBar fade-in")})),(0,t.YP)(c.Z.lastPaintTime,(e=>{if(e>0){z=c.Z.lastPaintName.value,z.length>8&&(z=z.slice(0,8)+"..."),K=c.Z.lastPaintTime.value,K>16e11&&(K=Math.ceil(K/1e3));let e=Math.floor(Date.now()/1e3);F=Math.floor((e-K)/60),F<0&&(F=0),document.querySelector(".lastPaintBar").className+=" fade-out",setTimeout((()=>{let e=document.querySelector(".lastPaintBar");console.log("set color :canvas.lastPaintGroup.value",c.Z.lastPaintGroup.value),1==c.Z.lastPaintGroup.value?e.style.backgroundColor="#00d599":2==c.Z.lastPaintGroup.value&&(e.style.backgroundColor="#ffc500");let a=0;F>=60?(a=Math.floor(F/60),F%=60,G=0==F?`${a}小时前“${z}”涂色`:`${a}小时${F}分钟前“${z}”涂色`):G=0==F?`刚刚“${z}”涂色`:`${F}分钟前“${z}”涂色`,j.value=G,document.querySelector(".lastPaintBar").className="lastPaintBar fade-in"}),1e3)}else 0==e&&(G="",j.value=G,document.querySelector(".lastPaintBar").className="lastPaintBar fade-out")})),(0,t.YP)(c.Z.lastPaintMin,(e=>{console.log("canvas.lastPaintMin  newaval",e);let a=0;e>=60?(a=Math.floor(e/60),e%=60,G=0==e?`${a}小时前“${z}”涂色`:`${a}小时${e}分钟前“${z}”涂色`):G=0==e?`刚刚“${z}”涂色`:`${e}分钟前“${z}”涂色`,j.value=G;let l=document.querySelector(".lastPaintBar");console.log("set color :canvas.lastPaintGroup.value",c.Z.lastPaintGroup.value),1==c.Z.lastPaintGroup.value?l.style.backgroundColor="#00d599":2==c.Z.lastPaintGroup.value&&(l.style.backgroundColor="#ffc500")}));let V,E=(0,s.iH)(!1),O=()=>{E.value=!0},A=()=>{E.value=!1},J=(0,s.iH)(!1),Q=()=>{V=setTimeout((()=>{r.Z.put("/user/cooling").then((()=>{console.log("send put request"),J.value=!0})).catch((e=>{console.log(e)}))}),200)};(0,t.YP)(J,(e=>{1==e&&(r.Z.get("/user/state").then((e=>{console.log(e),d.getCDtime()})).catch((e=>{console.log(e)})),J=!1)}));let ee=()=>{clearTimeout(V)};return(e,a)=>{const l=(0,t.up)("v-rect"),i=(0,t.up)("v-group"),u=(0,t.up)("v-layer"),c=(0,t.up)("v-stage");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",{ref_key:"cc",ref:U,id:"canvasContainer"},[(0,t._)("div",v,(0,o.zw)((0,s.SU)(j)),1),(0,t._)("div",{class:"shareBtn",onClick:a[0]||(a[0]=(...e)=>(0,s.SU)(O)&&(0,s.SU)(O)(...e))},[(0,t._)("img",{src:(0,s.SU)(_)},null,8,p)]),(0,t.Wm)(c,{ref_key:"stage",ref:w,config:(0,s.SU)(q),onTouchmove:(0,s.SU)(Y),onTouchstart:(0,s.SU)(D),onTouchend:(0,s.SU)(W)},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{ref:"layer",config:(0,s.SU)(h)},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{ref_key:"Field",ref:x,config:(0,s.SU)(b),onTouchstart:(0,s.SU)(H)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,s.SU)(C),((e,a)=>((0,t.wg)(),(0,t.j4)(l,{key:a,config:e,onTouchend:(0,s.SU)(R)},null,8,["config","onTouchend"])))),128))])),_:1},8,["config","onTouchstart"])])),_:1},8,["config"])])),_:1},8,["config","onTouchmove","onTouchstart","onTouchend"])],512),(0,s.SU)(E)?((0,t.wg)(),(0,t.iD)("div",{key:0,class:"sharePage",onClick:a[3]||(a[3]=(...e)=>(0,s.SU)(A)&&(0,s.SU)(A)(...e))},[(0,t._)("div",{class:"shareBox",onClick:(0,n.iM)((e=>null),["stop"])},[(0,t._)("img",{src:(0,s.SU)(k),onTouchstart:a[1]||(a[1]=(...e)=>(0,s.SU)(Q)&&(0,s.SU)(Q)(...e)),onTouchend:a[2]||(a[2]=(...e)=>(0,s.SU)(ee)&&(0,s.SU)(ee)(...e))},null,40,m),Z],8,f)])):(0,t.kq)("",!0)],64)}}},h=l(89);const S=(0,h.Z)(y,[["__scopeId","data-v-adc65a38"]]);var _=S,k=l(6265),q=l.n(k),b=l(7816),C=l(463),P=l(8162);const T=e=>((0,t.dD)("data-v-0417b0f6"),e=e(),(0,t.Cn)(),e),U={class:"scoreBar"},w=T((()=>(0,t._)("div",{class:"gridBorder"},null,-1))),x=T((()=>(0,t._)("div",{class:"scoreTitle"},"已涂色块数目",-1))),B={class:"scoreBox"},H=(0,t.uE)('<div class="scoreGroup" data-v-0417b0f6><div class="groupNameImg" data-v-0417b0f6><div class="groupImg" data-v-0417b0f6><img src="'+b+'" data-v-0417b0f6></div><div class="groupName" data-v-0417b0f6>   射日队</div></div><div class="groupNameImg" data-v-0417b0f6><div class="groupName" data-v-0417b0f6>偷瓜队  </div><div class="groupImg" data-v-0417b0f6><img src="'+C+'" data-v-0417b0f6></div></div></div>',1),X={class:"vsBox"},$={class:"groupNum"},M=T((()=>(0,t._)("div",{class:"vs"},"VS",-1))),D={class:"groupNum"},W=T((()=>(0,t._)("div",{class:"gridBorder"},null,-1))),Y={class:"wholeView"},I=T((()=>(0,t._)("div",{class:"rankingTitle"},"累计排行榜",-1))),N={class:"rangkingWarp"},L={class:"bottomBar"},F=T((()=>(0,t._)("div",{class:"gridBorder"},null,-1))),G={class:"scrollBar"},R={class:"animate"},K=T((()=>(0,t._)("div",{class:"gridBorder"},null,-1))),z=T((()=>(0,t._)("div",{class:"returnTips"},"点击任意地方返回",-1)));var j={__name:"situation",props:{showSit:{type:Boolean}},emits:["changeShowSit"],setup(e,{emit:a}){const l=e;let{showSit:n}=(0,s.BK)(l),i=(0,s.iH)(!0),u=()=>{i.value=!1,setTimeout((()=>{i.value=!0}),10)};(0,t.YP)(n,(e=>{if(1==e){let e=document.querySelector(".popupSituation");e.style.display="flex",a("changeShowSit",!1)}}));let r=166248e7,d=Date.now();console.log("day2",r),console.log("daynow",d);let g=(0,s.iH)("");return 1==c.Z.group1CompleteTarget.value&&1==c.Z.group2CompleteTarget.value?g.value="偷瓜队已完成目标拼图！   射日队已完成目标拼图！":1==c.Z.group1CompleteTarget.value?g.value="偷瓜队已完成目标拼图！":1==c.Z.group2CompleteTarget.value?g.value="射日队已完成目标拼图！":g.value=d<r?"涂色更多的一队在明天可以获得特制头像框哦":"",(0,t.YP)(c.Z.group1CompleteTarget,(e=>{1==e&&(1==c.Z.group2CompleteTarget.value?g.value="偷瓜队已完成目标拼图！   射日队已完成目标拼图！":g.value="偷瓜队已完成目标拼图！")})),(0,t.YP)(c.Z.group2CompleteTarget,(e=>{1==e&&(1==c.Z.group1CompleteTarget.value?g.value="偷瓜队已完成目标拼图！  射日队已完成目标拼图！":g.value="射日队已完成目标拼图！")})),(e,a)=>((0,t.wg)(),(0,t.iD)("div",{class:"situation",onClick:a[0]||(a[0]=(...e)=>(0,s.SU)(u)&&(0,s.SU)(u)(...e))},[(0,t._)("div",U,[w,x,(0,t._)("div",B,[H,(0,t._)("div",X,[(0,t._)("div",$,(0,o.zw)((0,s.SU)(c.Z).group2Num),1),M,(0,t._)("div",D,(0,o.zw)((0,s.SU)(c.Z).group1Num),1)])]),W]),(0,t._)("div",Y,[I,(0,t._)("div",N,[(0,s.SU)(i)?((0,t.wg)(),(0,t.j4)(P.Z,{key:0})):(0,t.kq)("",!0)])]),(0,t._)("div",L,[F,(0,t._)("div",G,[(0,t._)("p",R,(0,o.zw)((0,s.SU)(g)),1)]),K]),z]))}};const V=(0,h.Z)(j,[["__scopeId","data-v-0417b0f6"]]);var E=V;const O=e=>((0,t.dD)("data-v-4b0f6c32"),e=e(),(0,t.Cn)(),e),A={class:"bar"},J={class:"btnBox"},Q=O((()=>(0,t._)("div",{class:"redPoint2"},null,-1))),ee=(0,t.Uk)(" 战况"),ae=[Q,ee],le={id:"drawBtn",class:"btncenterChange"},te=O((()=>(0,t._)("div",{class:"redPoint1"},null,-1))),se=(0,t.Uk)(" 规则"),oe=[te,se],ne={class:"taskWindow"},ie=O((()=>(0,t._)("div",{class:"taskX"},null,-1))),ue=O((()=>(0,t._)("h2",null,"游戏规则",-1))),ce=["onClick"],re={class:"taskWarp t1"},de=["innerHTML"],ge={class:"taskImg"},ve=["src"],pe=O((()=>(0,t._)("div",{class:"taskWarp t2"},[(0,t._)("div",{class:"taskInfo"},"     记得关注每日更新的任务哦，根据完成的任务个数可以获得相应积分，积1分解锁青铜通行证，积2分解锁白银通行证，积4分就可以拿到最高级的通行证啦！ ")],-1))),fe=O((()=>(0,t._)("div",{class:"taskWarp t3"},[(0,t._)("div",{class:"taskInfo"},"     我们为你准备了六个不同的等级颜色，一天内连续涂色3次和一天内累计涂色6次，都可以获得颜色升级哦。 ")],-1))),me=(0,t.uE)('<div class="taskWarp t4" data-v-4b0f6c32><div class="taskInfo" data-v-4b0f6c32><span data-v-4b0f6c32> 游戏维持<span class="highLight" data-v-4b0f6c32>3天</span>，凭借最终通行证等级可以兑换相应<span class="highLight" data-v-4b0f6c32>水果捞满减</span>券。 <br data-v-4b0f6c32><br data-v-4b0f6c32>排行榜<span class="highLight" data-v-4b0f6c32>前十位</span>可以抽取<span class="highLight" data-v-4b0f6c32>实物周边惊喜盲盒</span>。 <br data-v-4b0f6c32><br data-v-4b0f6c32>具体兑换方式将在<span class="highLight" data-v-4b0f6c32>最后一天</span>公布。 </span></div></div>',1),Ze={class:"popupTips"},ye={class:"tipsText"};var he={__name:"bottomBar",props:{mode:{type:Number},refresh:{type:Boolean}},emits:["changeMode","changeRefresh"],setup(e,{emit:a}){const l=e;let u,{mode:r}=(0,s.BK)(l);1==i.Z.group.value?u="#00d599":2==i.Z.group.value&&(u="#ffc500");let g=(0,s.iH)(!1),v=(0,s.iH)("");if(i.Z.CDtime.value<=0)v.value="填色";else if(i.Z.CDtime.value>0){let e=(0,s.iH)(Math.floor(i.Z.CDtime.value/60)),a=(0,s.iH)(i.Z.CDtime.value%60);a.value<10&&(a.value=`0${a.value}`),v.value=`${e.value}:${a.value}`}(0,t.YP)(i.Z.CDtime,(e=>{if(console.log("cd时间更新"),0==e||e<0)v.value="填色";else{let e=(0,s.iH)(Math.floor(i.Z.CDtime.value/60)),a=(0,s.iH)(i.Z.CDtime.value%60);a.value<10&&(a.value=`0${a.value}`),v.value=`${e.value}:${a.value}`}}));let p=(0,s.iH)(""),f=function(e,a){let l=2e3;1==a&&(l=5e3),p.value=e;let t=document.querySelector(".popupTips");t.className="popupTips scale-in-center",setTimeout((()=>{t.className="popupTips scale-out-center"}),l)},m=()=>{if(1==r.value)a("changeMode",0);else if(0==r.value)q().get("/user/state").then((e=>{console.log(e),1==e.data.data.state&&i.Z.CDtime.value<=0?a("changeMode",1):f("点击画布右上角的转发按钮，分享游戏即可获得一次冷却时间清零。",1)})).catch((e=>{console.log(e)}));else if(2==r.value){let e={position:c.Z.targetSquare.value},l="/canvas";0,q().post(l,e).then((e=>{if(console.log(e),0==e.data.data.conflicting&&0==e.data.data.cooling){if(f("填色成功！"),a("changeMode",0),a("changeRefresh",!0),d.getCDtime(),1==e.data.data.is_user_upgraded&&(console.log("user升级了"),i.Z.level.value=e.data.data.user_level),1==e.data.data.is_group_upgraded){console.log("group升级了"),1==i.Z.group.value&&(c.Z.group1Level.value=e.data.data.group_level),2==i.Z.group.value&&(c.Z.group2Level.value=e.data.data.group_level),i.Z.groupLevel.value=e.data.data.group_level;let a=localStorage.getItem("groupLevelSit");null==a&&(a=0);let l=localStorage.getItem("groupLevelCard");if(null==l&&(l=0),a<i.Z.groupLevel.value){const e=document.querySelector(".redPoint2");e.style.display="flex"}q().get("/group/status").then((e=>{console.log(e),c.Z.group1CompleteTarget.value=e.data.data.groups[0].complete_target,c.Z.group2CompleteTarget.value=e.data.data.groups[1].complete_target})).catch((e=>{console.log(e)}))}}else 1==e.data.data.conflicting?f("你选择的方格已被你的阵营填色，请重新选择！"):1==e.data.data.cooling&&f("填色失败，请重试！"),a("changeMode",1),a("changeRefresh",!0)})).catch((e=>{console.log(e)}))}};(0,t.YP)(r,((e,a)=>{const l=document.querySelector("#drawBtn");console.log("mode change ",e),1==e&&0==a?(l.style.backgroundColor=u,v.value="填色"):0==e&&1==a?(l.style.backgroundColor="rgb(225, 225, 225)",v.value="填色"):2==e?v.value="确认":0==e&&2==a?(l.style.backgroundColor="rgb(225, 225, 225)",v.value="填色"):1==e&&2==a&&(v.value="填色")}));const Z="&nbsp; &nbsp; 涂色数量更多的一队将积一分。",y="&nbsp; &nbsp; 涂色数量更多的一队将积一分。<br/>&nbsp; &nbsp; 另外，下面是你队今日的目标图案，在画布上用自己队伍的颜色完成图案涂色也可以积一分，同时，对方队伍也有一个不同的目标图案，谨慎对方动态，注意及时破坏哦！",h="&nbsp; &nbsp; 涂色数量更多的一队将积一分。<br/>&nbsp; &nbsp; 另外，下面是你队今日的目标图案，在画布上用自己队伍的颜色完成图案涂色也可以积一分，同时，对方队伍也有一个不同的目标图案，谨慎对方动态，注意及时破坏哦！";let S,_=(0,s.iH)("默认文字"),k=()=>{let e=document.querySelector(".popupTask");e.style.display="flex";const a=document.querySelector(".redPoint1");"flex"==a.style.display&&(a.style.display="none",console.log(S),localStorage.setItem("task",S))},b=()=>{let e=document.querySelector(".popupTask");e.style.display="none";let a=document.querySelector(".t1"),l=document.querySelector(".t2"),t=document.querySelector(".t3"),s=document.querySelector(".t4");a.style.display="none",l.style.display="none",t.style.display="none",s.style.display="none"},C=(0,s.iH)(!1),P=e=>{C.value=e},T=()=>{P(!0);const e=document.querySelector(".redPoint2");"flex"==e.style.display&&(e.style.display="none",console.log(i.Z.groupLevel.value),localStorage.setItem("groupLevelSit",i.Z.groupLevel.value)),g.value=!0},U=()=>{let e=document.querySelector(".popupSituation");e.style.display="none"},w=(0,s.iH)("");(0,t.bv)((()=>{q().get("/task").then((e=>{S=e.data.data.task,console.log("sign",S),1==S?_.value=Z:2==S?_.value=y:3==S&&(_.value=h),null==e.data.data.img?(document.querySelector(".taskImg").style.display="none",document.querySelector(".tasksubTitle").style.display="none"):w.value=e.data.data.img;let a=localStorage.getItem("task");null==a&&(a=0),console.log("oldMission",a);const l=document.querySelector(".redPoint1");l.style.display=a<S?"flex":"none"})).catch((e=>{console.log(e)}));let e=localStorage.getItem("groupLevelSit");null==e&&(e=0),console.log("oldSitSign",e),console.log("user.groupLevel.value",i.Z.groupLevel.value);const a=document.querySelector(".redPoint2");e<i.Z.groupLevel.value?a.style.display="flex":a.style.display="none"}));let x=e=>{let a=document.querySelector(e);console.log(a.style.display);let l=document.querySelector(".t1"),t=document.querySelector(".t2"),s=document.querySelector(".t3"),o=document.querySelector(".t4");l.style.display="none",t.style.display="none",s.style.display="none",o.style.display="none","none"!=a.style.display?a.style.display="none":"none"==a.style.display&&(a.style.display="flex")};return(e,a)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",A,[(0,t._)("div",J,[(0,t._)("div",{class:"btn btnleft",onClick:a[0]||(a[0]=(...e)=>(0,s.SU)(T)&&(0,s.SU)(T)(...e))},ae),(0,t._)("div",{class:"btncenter",onClick:a[1]||(a[1]=(...e)=>(0,s.SU)(m)&&(0,s.SU)(m)(...e))},[(0,t._)("div",le,(0,o.zw)((0,s.SU)(v)),1)]),(0,t._)("div",{class:"btn btnright",onClick:a[2]||(a[2]=(...e)=>(0,s.SU)(k)&&(0,s.SU)(k)(...e))},oe)])]),(0,t._)("div",{class:"popupTask",onClick:a[8]||(a[8]=(...e)=>(0,s.SU)(b)&&(0,s.SU)(b)(...e))},[(0,t._)("div",ne,[ie,ue,(0,t._)("div",{class:"taskContainer",onClick:(0,n.iM)((e=>null),["stop"])},[(0,t._)("div",{class:"taskTitle",onClick:a[3]||(a[3]=e=>(0,s.SU)(x)(".t1"))},"今日任务"),(0,t._)("div",re,[(0,t._)("div",{class:"taskInfo",innerHTML:(0,s.SU)(_)},null,8,de),(0,t._)("div",{class:"tasksubTitle",onClick:a[4]||(a[4]=e=>(0,s.SU)(x)())},"目标图案:"),(0,t._)("div",ge,[(0,t._)("img",{class:"taskimage",src:(0,s.SU)(w)},null,8,ve)])]),(0,t._)("div",{class:"taskTitle",onClick:a[5]||(a[5]=e=>(0,s.SU)(x)(".t2"))},"团队通行证升级"),pe,(0,t._)("div",{class:"taskTitle",onClick:a[6]||(a[6]=e=>(0,s.SU)(x)(".t3"))},"个人填色升级"),fe,(0,t._)("div",{class:"taskTitle",onClick:a[7]||(a[7]=e=>(0,s.SU)(x)(".t4"))},"游戏线下福利"),me],8,ce)])]),(0,t._)("div",{class:"popupSituation",onClick:a[9]||(a[9]=(...e)=>(0,s.SU)(U)&&(0,s.SU)(U)(...e))},[(0,t.Wm)(E,{showSit:(0,s.SU)(C),onChangeShowSit:(0,s.SU)(P)},null,8,["showSit","onChangeShowSit"])]),(0,t._)("div",Ze,[(0,t._)("div",ye,(0,o.zw)((0,s.SU)(p)),1)])],64))}};const Se=(0,h.Z)(he,[["__scopeId","data-v-4b0f6c32"]]);var _e=Se,ke=l(5996),qe=l(2859);const be=e=>((0,t.dD)("data-v-ef973ee8"),e=e(),(0,t.Cn)(),e),Ce={class:"winPageWarp"},Pe={class:"winCardWarp"},Te={class:"card0"},Ue=["src"],we=be((()=>(0,t._)("div",null,"青铜哦，再接再厉！",-1))),xe={class:"card0"},Be=["src"],He=be((()=>(0,t._)("div",null,"太棒啦，白银能手！",-1))),Xe={class:"card0"},$e=["src"],Me=be((()=>(0,t._)("div",null,"OMG！已经是黄金啦！",-1))),De=be((()=>(0,t._)("div",{class:"backToMain"},[(0,t._)("div",{class:"returnTips"},"点击任意地方返回")],-1)));var We={__name:"winnerPage",props:{logo:{}},setup(e){const a=e,{logo:l}=(0,s.BK)(a);let o=(0,s.iH)("");1==i.Z.group.value?o.value="#00d599":2==i.Z.group.value&&(o.value="#ffc500");let n=(0,s.iH)(null),u=(0,s.iH)(null),c=(0,s.iH)(null),r=(0,s.iH)(null),d=(0,s.iH)(null),g=(0,s.iH)(null);(0,t.bv)((()=>{i.Z.groupLevel.value>=2&&(r.value.style.display="none",n.value.style.display="flex"),i.Z.groupLevel.value>=3&&(d.value.style.display="none",u.value.style.display="flex"),i.Z.groupLevel.value>=5&&(g.value.style.display="none",c.value.style.display="flex")})),(0,t.YP)(i.Z.groupLevel,(e=>{2==e?(r.value.style.display="none",n.value.style.display="flex"):3==e||4==e?(r.value.style.display="none",d.value.style.display="none",n.value.style.display="flex",u.value.style.display="flex"):5!=e&&6!=e||(r.value.style.display="none",d.value.style.display="none",g.value.style.display="none",n.value.style.display="flex",u.value.style.display="flex",c.value.style.display="flex")}));let v=()=>{document.querySelector(".popupWinerPage").style.display="none"};return(e,a)=>((0,t.wg)(),(0,t.iD)("div",Ce,[(0,t._)("div",{class:"winpageWarp-AD",onClick:a[0]||(a[0]=(...e)=>(0,s.SU)(v)&&(0,s.SU)(v)(...e))},[(0,t.Wm)(ke.Z,{logo:(0,s.SU)(l),clickable:!1},null,8,["logo"]),(0,t._)("section",Pe,[(0,t._)("div",Te,[(0,t._)("div",{ref_key:"cd1",ref:r,class:"cardDefalutText"},"Group Lv.2即可解锁",512),(0,t._)("div",{ref_key:"card1",ref:n,class:"card1"},[(0,t._)("img",{class:"userimg",src:(0,s.SU)(i.Z).userImg},null,8,Ue),we],512)]),(0,t._)("div",xe,[(0,t._)("div",{ref_key:"cd2",ref:d,class:"cardDefalutText"},"Group Lv.3即可解锁",512),(0,t._)("div",{ref_key:"card2",ref:u,class:"card2"},[(0,t._)("img",{class:"userimg",src:(0,s.SU)(i.Z).userImg},null,8,Be),He],512)]),(0,t._)("div",Xe,[(0,t._)("div",{ref_key:"cd3",ref:g,class:"cardDefalutText"},"Group Lv.5即可解锁",512),(0,t._)("div",{ref_key:"card3",ref:c,class:"card3"},[(0,t._)("img",{class:"userimg",src:(0,s.SU)(i.Z).userImg},null,8,$e),Me],512)])]),De]),(0,t.Wm)(qe.Z)]))}};const Ye=(0,h.Z)(We,[["__scopeId","data-v-ef973ee8"]]);var Ie=Ye;const Ne={class:"popupWinerPage"};var Le={__name:"topUserInfo",props:{logo:{}},setup(e){const a=e,{logo:l}=(0,s.BK)(a);return(e,a)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(ke.Z,{logo:(0,s.SU)(l),clickable:!0},null,8,["logo"]),(0,t._)("div",Ne,[(0,t.Wm)(Ie,{logo:(0,s.SU)(l)},null,8,["logo"])])],64))}};const Fe=(0,h.Z)(Le,[["__scopeId","data-v-27a06e20"]]);var Ge=Fe;const Re={class:"gameView"},Ke={class:"game fade-in"};var ze={__name:"gameView",setup(e){let a=(0,s.iH)(0),o=(0,s.iH)(!1),n=e=>{a.value=e},c=e=>{o.value=e},r=(0,s.iH)(null);0==i.Z.group.value?u.Z.replace("/loading"):1==i.Z.group.value?r.value=l(463):2==i.Z.group.value&&(r.value=l(7816));let d=new Image;d.src=l(5611);let g=new Image;return g.src=l(2912),(0,t.bv)((()=>{console.log("gameView onMounted")})),(e,l)=>((0,t.wg)(),(0,t.iD)("div",Re,[(0,t._)("div",Ke,[(0,t.Wm)(Ge,{logo:(0,s.SU)(r)},null,8,["logo"]),(0,t.Wm)(_,{mode:(0,s.SU)(a),refresh:(0,s.SU)(o),onChangeMode:(0,s.SU)(n),onChangeRefresh:(0,s.SU)(c)},null,8,["mode","refresh","onChangeMode","onChangeRefresh"]),(0,t.Wm)(_e,{mode:(0,s.SU)(a),refresh:(0,s.SU)(o),onChangeMode:(0,s.SU)(n),onChangeRefresh:(0,s.SU)(c)},null,8,["mode","refresh","onChangeMode","onChangeRefresh"]),(0,t.Wm)(qe.Z)])]))}};const je=(0,h.Z)(ze,[["__scopeId","data-v-cb804a52"]]);var Ve=je},5611:function(e,a,l){e.exports=l.p+"img/situation_border.a6fe45a2.png"},2912:function(e,a,l){e.exports=l.p+"img/win_card0.1e8e8f6c.png"}}]);
//# sourceMappingURL=827.f5914a1e.js.map