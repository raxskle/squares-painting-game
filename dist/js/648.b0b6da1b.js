"use strict";(self["webpackChunkbypixel"]=self["webpackChunkbypixel"]||[]).push([[648],{2648:function(e,a,l){l.r(a),l.d(a,{default:function(){return ze}});var t=l(3396),o=l(4870),s=l(7139),n=l(3194),i=l(3632),u=l(6963),r=l(4336);const c={class:"lastPaintBar"},d={class:"shareBtn"},g=["src"];var v={__name:"mainCanvas",props:{mode:{type:Number,default:0},refresh:{type:Boolean}},emits:["changeMode","changeRefresh"],setup(e,{emit:a}){const l=e,{mode:v,refresh:p}=(0,o.BK)(l);let m=(0,o.qj)({scaleX:1,scaleY:1});console.log("进入主页面且开始初始化数据"),u.Z.initCanvasData();let f=u.Z.configKonva;u.Z.fillConfigKonva();let Z=u.Z.configField;u.Z.fillconfigField();let y=u.Z.configSquares;u.Z.fillConfigSquares();let h,S,_=(0,o.iH)(null),q=(0,o.iH)(null),k=(0,o.iH)(null),C={squareName:"square0",squareId:-1,stroke:"#c8c8c8",strokeWidth:1},T=e=>{h=e.target.parent.attrs.x,S=e.target.parent.attrs.y},P=(0,o.qj)({scale:1,centerX0:0,centerY0:0,centerXf:0,centerYf:0,oldDistance:0}),b=(e,a)=>Math.hypot(e.x-a.x,e.y-a.y),U=(e,a)=>({x:(e.x+a.x)/2,y:(e.y+a.y)/2}),w=e=>{if(void 0==e.evt&&2==e.touches.length){let a={x:e.touches[0].clientX,y:e.touches[0].clientY},l={x:e.touches[1].clientX,y:e.touches[1].clientY},t=b(a,l);P.oldDistance=t;let o=U(a,l),s=document.querySelector("#canvasContainer").getBoundingClientRect().x,n=document.querySelector("#canvasContainer").getBoundingClientRect().y;P.centerX0=o.x-s,P.centerY0=o.y-n,P.centerXf=(P.centerX0-h)/P.scale*u.Z.fieldScale0,P.centerYf=(P.centerY0-S)/P.scale*u.Z.fieldScale0}},x=e=>{void 0==e.evt&&(P.oldDistance=0)},B=e=>{if(void 0==e.evt){if(0!=P.oldDistance&&2==e.changedTouches.length){let a={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY},l={x:e.changedTouches[1].clientX,y:e.changedTouches[1].clientY},t=b(a,l),o=.08*u.Z.squareXnum/25,s=t/P.oldDistance*o;s>1.5*o?s=1.5*o:s<.7*o&&(s=.7*o),s>1*o?P.scale=P.scale+s>4?4:P.scale+s:s<1*o&&(P.scale=P.scale-s>4?4:P.scale-s),P.scale<1&&(P.scale=1),P.scale>4*u.Z.squareXnum/25&&(P.scale=4*u.Z.squareXnum/25),1==P.scale?(u.Z.configField.scaleX=u.Z.fieldScale0,u.Z.configField.scaleY=u.Z.fieldScale0,u.Z.configField.x=u.Z.fieldX0,u.Z.configField.y=u.Z.fieldY0,u.Z.configField.draggable=!0,u.Z.configField.dragBoundFunc=function(){return{x:u.Z.fieldX0,y:u.Z.fieldY0}}):P.scale>1&&(u.Z.configField.draggable=!1,u.Z.configField.scaleX=P.scale*u.Z.fieldScale0,u.Z.configField.scaleY=P.scale*u.Z.fieldScale0,u.Z.configField.x=P.centerX0-P.centerXf*P.scale*u.Z.fieldScale0,u.Z.configField.y=P.centerY0-P.centerYf*P.scale*u.Z.fieldScale0),P.oldDistance=t}1==e.changedTouches.length&&(1==P.scale?(u.Z.configField.draggable=!0,u.Z.configField.dragBoundFunc=function(){return{x:u.Z.fieldX0,y:u.Z.fieldY0}}):P.scale>1&&(u.Z.configField.draggable=!0,u.Z.configField.dragBoundFunc=function(e){let a=e.y;a=e.y>.3*u.Z.stageHeight?.3*u.Z.stageHeight:e.y<u.Z.stageHeight-u.Z.fieldHeight*u.Z.configField.scaleY-.3*u.Z.stageHeight?u.Z.stageHeight-u.Z.fieldHeight*u.Z.configField.scaleY-.3*u.Z.stageHeight:e.y;let l=e.x;return l=e.x>.3*u.Z.stageWidth?.3*u.Z.stageWidth:e.x<u.Z.stageWidth-u.Z.fieldWidth*u.Z.configField.scaleX-.3*u.Z.stageWidth?u.Z.stageWidth-u.Z.fieldWidth*u.Z.configField.scaleX-.3*u.Z.stageWidth:e.x,{x:l,y:a}}))}},X=()=>{console.log("into drawCanvas更新画布");for(let e=0;e<u.Z.squareYnum;e++)for(let a=0;a<u.Z.squareXnum;a++)u.Z.configSquares[e*u.Z.squareXnum+a].fill=u.Z.squareColor(e,a),u.Z.configSquares[e*u.Z.squareXnum+a].occupy=u.Z.setOccupy(e,a);-1!=u.Z.latestPosition.value[0]&&-1!=u.Z.latestPosition.value[1]&&(-1!=u.Z.lastPosition.value[0]&&-1!=u.Z.lastPosition.value[1]&&(u.Z.configSquares[u.Z.lastPosition.value[0]*u.Z.squareXnum+u.Z.lastPosition.value[1]].stroke="rgb(200, 200, 200)"),u.Z.configSquares[u.Z.latestPosition.value[0]*u.Z.squareXnum+u.Z.latestPosition.value[1]].stroke="black",q.value.getStage().find(`.square${u.Z.latestPosition.value[0]*u.Z.squareXnum+u.Z.latestPosition.value[1]}`)[0].moveToTop())},$=()=>{r.Z.get("/canvas").then((e=>{u.Z.canvasState.value=e.data.data.canvas,u.Z.canvasState.value.length!=u.Z.squareYnum&&(i.Z.replace("/loading"),location.reload(!0)),u.Z.lastPosition.value=u.Z.latestPosition.value,u.Z.group1Num.value=e.data.data.pixels_num.group_1,u.Z.group2Num.value=e.data.data.pixels_num.group_2,null==e.data.data.last_paint?u.Z.latestPosition.value=[-1,-1]:u.Z.latestPosition.value=e.data.data.last_paint.pixel_position,null!=e.data.data.last_paint?(u.Z.lastPaintTime.value==e.data.data.last_paint.time&&u.Z.lastPaintName.value==e.data.data.last_paint.nickname&&(u.Z.lastPaintMin.value=Math.floor((Date.now()-e.data.data.last_paint.time)/6e4)),u.Z.lastPaintTime.value=e.data.data.last_paint.time,u.Z.lastPaintName.value=e.data.data.last_paint.nickname,u.Z.lastPaintGroup.value=e.data.data.last_paint.group):u.Z.lastPaintTime.value=0,console.log("canvas.canvasState.value:",u.Z.canvasState.value),X(),console.log("成功刷新画布")})).catch((e=>{console.log("请求canvas发生错误：",e)}))};setInterval($,2e4),(0,t.YP)(p,(e=>{1==e&&($(),C.squareId=-1,C.squareName="square0",a("changeRefresh",!1))}));let W=()=>{1==v.value&&a("changeMode",2)};(0,t.YP)(v,((e,a)=>{if(1==e)for(let l=0;l<u.Z.squareYnum;l++)for(let e=0;e<u.Z.squareXnum;e++)3!=u.Z.configSquares[l*u.Z.squareXnum+e].occupy?u.Z.configSquares[l*u.Z.squareXnum+e].strokeWidth=1:3==u.Z.configSquares[l*u.Z.squareXnum+e].occupy&&q.value.getStage().find(`.square${l*u.Z.squareXnum+e}`)[0].moveToBottom();else if(0==e)for(let l=0;l<u.Z.squareYnum;l++)for(let e=0;e<u.Z.squareXnum;e++)3!=u.Z.configSquares[l*u.Z.squareXnum+e].occupy&&(u.Z.configSquares[l*u.Z.squareXnum+e].strokeWidth=0);if(1==e&&2==a){let e=q.value.getStage().find(`.${C.squareName}`)[0];e.attrs.strokeWidth=C.strokeWidth,e.attrs.stroke=C.stroke,e.moveToBottom()}}));let D,H,M=function(e){if(1==v.value||2==v.value){if(n.Z.group.value!=e.target.attrs.occupy&&3!=e.target.attrs.occupy){let a=e.target.attrs.name,l=a.slice(6);console.log("click this ",l);let t=Math.floor(l/u.Z.squareXnum),o=l%u.Z.squareXnum,s=[];s.push(t),s.push(o),console.log(s),u.Z.targetSquare.value=s,W();let n=q.value.getStage();if(-1!=C.squareId){console.log("恢复上一个");let e=n.find(`.${C.squareName}`)[0];console.log("lastTarget.attrs",e.attrs),console.log("saveSquare.squareName"),e.attrs.strokeWidth=C.strokeWidth,e.attrs.stroke=C.stroke,"black"!=e.attrs.stroke&&e.moveToBottom();let a=Number(C.squareId)+Number(u.Z.squareXnum);a<u.Z.squareXnum*u.Z.squareYnum&&3==n.find(`.square${a}`)[0].attrs.occupy&&n.find(`.square${a}`)[0].moveToBottom();let l=Number(C.squareId)-Number(u.Z.squareXnum);l>=0&&3==n.find(`.square${l}`)[0].attrs.occupy&&n.find(`.square${l}`)[0].moveToBottom();let t=Number(C.squareId)-1;t>=0&&3==n.find(`.square${t}`)[0].attrs.occupy&&n.find(`.square${t}`)[0].moveToBottom();let o=Number(C.squareId)+1;o<u.Z.squareXnum*u.Z.squareYnum&&3==n.find(`.square${o}`)[0].attrs.occupy&&n.find(`.square${o}`)[0].moveToBottom()}else console.log("初次选择");let i=n.find(`.${a}`)[0];C.squareName=i.attrs.name,C.squareId=l,C.stroke=i.attrs.stroke,C.strokeWidth=i.attrs.strokeWidth,console.log("保存当前的stroke",C.stroke),i.moveToTop(),i.attrs.strokeWidth=3,i.attrs.stroke="#c8c8c8"}}else 0==v.value&&e.evt.changedTouches.length<=1&&0==e.evt.targetTouches.length&&0==n.Z.CDtime.value&&a("changeMode",1)},Y=u.Z.lastPaintTime.value,I=u.Z.lastPaintName.value;if(I.length>8&&(I=I.slice(0,8)+"..."),0==Y)H="";else if(Y>0){Y>16e11&&(Y=Math.ceil(Y/1e3));let e=Math.floor(Date.now()/1e3);D=Math.floor((e-Y)/60),D<0&&(D=0);let a=0;D>=60?(a=Math.floor(D/60),D%=60,H=`${a}小时${D}分钟前“${I}”涂色`):H=0==D?`刚刚“${I}”涂色`:`${D}分钟前“${I}”涂色`}let N=(0,o.iH)(H);return(0,t.bv)((()=>{console.log("mainCanvas onMounted"),-1!=u.Z.latestPosition.value[0]&&-1!=u.Z.latestPosition.value[1]&&(q.value.getStage().find(`.square${u.Z.latestPosition.value[0]*u.Z.squareXnum+u.Z.latestPosition.value[1]}`)[0].moveToTop(),console.log(u.Z.configSquares));let e=document.querySelector(".lastPaintBar");1==u.Z.lastPaintGroup.value?e.style.backgroundColor="#00d599":2==u.Z.lastPaintGroup.value&&(e.style.backgroundColor="#ffc500"),Y>0&&(document.querySelector(".lastPaintBar").className="lastPaintBar fade-in")})),(0,t.YP)(u.Z.lastPaintTime,(e=>{if(e>0){I=u.Z.lastPaintName.value,I.length>8&&(I=I.slice(0,8)+"..."),Y=u.Z.lastPaintTime.value,Y>16e11&&(Y=Math.ceil(Y/1e3));let e=Math.floor(Date.now()/1e3);D=Math.floor((e-Y)/60),D<0&&(D=0),document.querySelector(".lastPaintBar").className+=" fade-out",setTimeout((()=>{let e=document.querySelector(".lastPaintBar");1==u.Z.lastPaintGroup.value?e.style.backgroundColor="#00d599":2==u.Z.lastPaintGroup.value&&(e.style.backgroundColor="#ffc500");let a=0;D>=60?(a=Math.floor(D/60),D%=60,H=0==D?`${a}小时前“${I}”涂色`:`${a}小时${D}分钟前“${I}”涂色`):H=0==D?`刚刚“${I}”涂色`:`${D}分钟前“${I}”涂色`,N.value=H,document.querySelector(".lastPaintBar").className="lastPaintBar fade-in"}),1e3)}else 0==e&&(H="",N.value=H,document.querySelector(".lastPaintBar").className="lastPaintBar fade-out")})),(0,t.YP)(u.Z.lastPaintMin,(e=>{let a=0;e>=60?(a=Math.floor(e/60),e%=60,H=0==e?`${a}小时前“${I}”涂色`:`${a}小时${e}分钟前“${I}”涂色`):H=0==e?`刚刚“${I}”涂色`:`${e}分钟前“${I}”涂色`,N.value=H})),(e,a)=>{const l=(0,t.up)("v-rect"),n=(0,t.up)("v-group"),i=(0,t.up)("v-layer"),u=(0,t.up)("v-stage");return(0,t.wg)(),(0,t.iD)("div",{ref_key:"cc",ref:_,id:"canvasContainer"},[(0,t._)("div",c,(0,s.zw)((0,o.SU)(N)),1),(0,t._)("div",d,[(0,t._)("img",{src:"/shareIcon.png"},null,8,g)]),(0,t.Wm)(u,{ref_key:"stage",ref:q,config:(0,o.SU)(f),onTouchmove:(0,o.SU)(B),onTouchstart:(0,o.SU)(w),onTouchend:(0,o.SU)(x)},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{ref:"layer",config:(0,o.SU)(m)},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{ref_key:"Field",ref:k,config:(0,o.SU)(Z),onTouchstart:(0,o.SU)(T)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(y),((e,a)=>((0,t.wg)(),(0,t.j4)(l,{key:a,config:e,onTouchend:(0,o.SU)(M)},null,8,["config","onTouchend"])))),128))])),_:1},8,["config","onTouchstart"])])),_:1},8,["config"])])),_:1},8,["config","onTouchmove","onTouchstart","onTouchend"])],512)}}},p=l(89);const m=(0,p.Z)(v,[["__scopeId","data-v-01a1c963"]]);var f=m,Z=l(9242),y=l(6265),h=l.n(y),S=l(7816),_=l(463),q=l(4242);const k=e=>((0,t.dD)("data-v-a111549c"),e=e(),(0,t.Cn)(),e),C={class:"situation"},T={class:"scoreBar"},P=k((()=>(0,t._)("div",{class:"gridBorder"},null,-1))),b=k((()=>(0,t._)("div",{class:"scoreTitle"},"已涂色块数目",-1))),U={class:"scoreBox"},w=(0,t.uE)('<div class="scoreGroup" data-v-a111549c><div class="groupNameImg" data-v-a111549c><div class="groupImg" data-v-a111549c><img src="'+S+'" data-v-a111549c></div><div class="groupName" data-v-a111549c>   射日队</div></div><div class="groupNameImg" data-v-a111549c><div class="groupName" data-v-a111549c>偷瓜队  </div><div class="groupImg" data-v-a111549c><img src="'+_+'" data-v-a111549c></div></div></div>',1),x={class:"vsBox"},B={class:"groupNum"},X=k((()=>(0,t._)("div",{class:"vs"},"VS",-1))),$={class:"groupNum"},W=k((()=>(0,t._)("div",{class:"gridBorder"},null,-1))),D={class:"wholeView"},H=k((()=>(0,t._)("div",{class:"rankingTitle"},"累计排行榜",-1))),M={class:"rangkingWarp"},Y={class:"bottomBar"},I=k((()=>(0,t._)("div",{class:"gridBorder"},null,-1))),N={class:"scrollBar"},L={class:"animate"},F=k((()=>(0,t._)("div",{class:"gridBorder"},null,-1))),G=k((()=>(0,t._)("div",{class:"returnTips"},"点击任意地方返回",-1)));var R={__name:"situation",props:{showSit:{type:Boolean}},emits:["changeShowSit"],setup(e,{emit:a}){const l=e;let{showSit:n}=(0,o.BK)(l),i=(0,o.iH)(!0);(0,t.YP)(n,(e=>{if(1==e){let e=document.querySelector(".popupSituation");e.style.display="flex",a("changeShowSit",!1)}}));let r=166248e7,c=Date.now();console.log("day2",r),console.log("daynow",c);let d=(0,o.iH)("");return 1==u.Z.group1CompleteTarget.value&&1==u.Z.group2CompleteTarget.value?d.value="偷瓜队已完成目标拼图！   射日队已完成目标拼图！":1==u.Z.group1CompleteTarget.value?d.value="偷瓜队已完成目标拼图！":1==u.Z.group2CompleteTarget.value?d.value="射日队已完成目标拼图！":d.value=c<r?"涂色更多的一队在明天可以获得特制头像框哦":"",(0,t.YP)(u.Z.group1CompleteTarget,(e=>{1==e&&(1==u.Z.group2CompleteTarget.value?d.value="偷瓜队已完成目标拼图！   射日队已完成目标拼图！":d.value="偷瓜队已完成目标拼图！")})),(0,t.YP)(u.Z.group2CompleteTarget,(e=>{1==e&&(1==u.Z.group1CompleteTarget.value?d.value="偷瓜队已完成目标拼图！  射日队已完成目标拼图！":d.value="射日队已完成目标拼图！")})),(e,a)=>((0,t.wg)(),(0,t.iD)("div",C,[(0,t._)("div",T,[P,b,(0,t._)("div",U,[w,(0,t._)("div",x,[(0,t._)("div",B,(0,s.zw)((0,o.SU)(u.Z).group2Num),1),X,(0,t._)("div",$,(0,s.zw)((0,o.SU)(u.Z).group1Num),1)])]),W]),(0,t._)("div",D,[H,(0,t._)("div",M,[(0,o.SU)(i)?((0,t.wg)(),(0,t.j4)(q.Z,{key:0})):(0,t.kq)("",!0)])]),(0,t._)("div",Y,[I,(0,t._)("div",N,[(0,t._)("p",L,(0,s.zw)((0,o.SU)(d)),1)]),F]),G]))}};const K=(0,p.Z)(R,[["__scopeId","data-v-a111549c"]]);var z=K,V={getCDtime(){r.Z.get("/user/state").then((e=>{if(1==e.data.data.state)console.log("能draw"),n.Z.CDtime.value=0;else if(0==e.data.data.state){console.log("不能draw");let a=e.data.data.last_paint_time;a>16e11&&(a=Math.ceil(a/1e3));let l=300,t=a+l,o=Math.floor(Date.now()/1e3);console.log("下一次",t);let s=t-o<0?0:t-o;(s>=l||s<l-2)&&(s=l-1),n.Z.CDtime.value=s,n.Z.timeGoes()}})).catch((e=>{console.log(e)}))}};const j=e=>((0,t.dD)("data-v-6222602f"),e=e(),(0,t.Cn)(),e),O={class:"bar"},A={class:"btnBox"},E=j((()=>(0,t._)("div",{class:"redPoint2"},null,-1))),J=(0,t.Uk)(" 战况"),Q=[E,J],ee={id:"drawBtn",class:"btncenterChange"},ae=j((()=>(0,t._)("div",{class:"redPoint1"},null,-1))),le=(0,t.Uk)(" 规则"),te=[ae,le],oe={class:"taskWindow"},se=j((()=>(0,t._)("div",{class:"taskX"},null,-1))),ne=j((()=>(0,t._)("h2",null,"游戏规则",-1))),ie=["onClick"],ue={class:"taskWarp t1"},re=["innerHTML"],ce={class:"taskImg"},de=["src"],ge=j((()=>(0,t._)("div",{class:"taskWarp t2"},[(0,t._)("div",{class:"taskInfo"},"     记得关注每日更新的任务哦，根据完成的任务个数可以获得相应积分，积1分解锁青铜通行证，积2分解锁白银通行证，积4分就可以拿到最高级的通行证啦！ ")],-1))),ve=j((()=>(0,t._)("div",{class:"taskWarp t3"},[(0,t._)("div",{class:"taskInfo"},"     我们为你准备了六个不同的等级颜色，一天内连续涂色3次和一天内累计涂色6次，都可以获得颜色升级哦。 ")],-1))),pe=j((()=>(0,t._)("div",{class:"taskWarp t4"},[(0,t._)("div",{class:"taskInfo"},"     Huster，本游戏维持三天，你可以凭借最终的通行证等级，获取相应的水果捞满减福利哦，等级越高福利越好，快快开始游戏吧！ ")],-1))),me={class:"popupTips"},fe={class:"tipsText"};var Ze={__name:"bottomBar",props:{mode:{type:Number},refresh:{type:Boolean}},emits:["changeMode","changeRefresh"],setup(e,{emit:a}){const l=e;let i,{mode:r}=(0,o.BK)(l);1==n.Z.group.value?i="#00d599":2==n.Z.group.value&&(i="#ffc500");let c=(0,o.iH)("");if(n.Z.CDtime.value<=0)c.value="填色";else if(n.Z.CDtime.value>0){let e=(0,o.iH)(Math.floor(n.Z.CDtime.value/60)),a=(0,o.iH)(n.Z.CDtime.value%60);a.value<10&&(a.value=`0${a.value}`),c.value=`${e.value}:${a.value}`}(0,t.YP)(n.Z.CDtime,(e=>{if(console.log("cd时间更新"),0==e||e<0)c.value="填色";else{let e=(0,o.iH)(Math.floor(n.Z.CDtime.value/60)),a=(0,o.iH)(n.Z.CDtime.value%60);a.value<10&&(a.value=`0${a.value}`),c.value=`${e.value}:${a.value}`}}));let d=(0,o.iH)(""),g=function(e){d.value=e;let a=document.querySelector(".popupTips");a.className="popupTips scale-in-center",setTimeout((()=>{a.className="popupTips scale-out-center"}),2e3)},v=()=>{if(1==r.value)a("changeMode",0);else if(0==r.value)h().get("/user/state").then((e=>{console.log(e),1==e.data.data.state&&n.Z.CDtime.value<=0?a("changeMode",1):g("每位玩家每半小时只能填色一次！")})).catch((e=>{console.log(e)}));else if(2==r.value){let e={position:u.Z.targetSquare.value},l="/canvas";0,h().post(l,e).then((e=>{if(console.log(e),0==e.data.data.conflicting&&0==e.data.data.cooling){if(g("填色成功！"),a("changeMode",0),a("changeRefresh",!0),V.getCDtime(),1==e.data.data.is_user_upgraded&&(console.log("user升级了"),n.Z.level.value=e.data.data.user_level),1==e.data.data.is_group_upgraded){console.log("group升级了"),1==n.Z.group.value&&(u.Z.group1Level.value=e.data.data.group_level),2==n.Z.group.value&&(u.Z.group2Level.value=e.data.data.group_level),n.Z.groupLevel.value=e.data.data.group_level;let a=localStorage.getItem("groupLevelSit");null==a&&(a=0);let l=localStorage.getItem("groupLevelCard");if(null==l&&(l=0),a<n.Z.groupLevel.value){const e=document.querySelector(".redPoint2");e.style.display="flex"}if(l<n.Z.groupLevel.value){const e=document.querySelector(".redPoint3");1!=n.Z.groupLevel.value&&2!=n.Z.groupLevel.value&&4!=n.Z.groupLevel.value||(e.style.display="flex")}h().get("/group/status").then((e=>{console.log(e),u.Z.group1CompleteTarget.value=e.data.data.groups[0].complete_target,u.Z.group2CompleteTarget.value=e.data.data.groups[1].complete_target})).catch((e=>{console.log(e)}))}}else 1==e.data.data.conflicting?g("你选择的方格已被你的阵营填色，请重新选择！"):1==e.data.data.cooling&&(g("填色失败，请重试！"),console.log("填色失败，同用户一小时内只能填色一次")),a("changeMode",1),a("changeRefresh",!0)})).catch((e=>{console.log(e)}))}};(0,t.YP)(r,((e,a)=>{const l=document.querySelector("#drawBtn");console.log("mode change ",e),1==e&&0==a?(l.style.backgroundColor=i,c.value="填色"):0==e&&1==a?(l.style.backgroundColor="rgb(225, 225, 225)",c.value="填色"):2==e?c.value="确认":0==e&&2==a?(l.style.backgroundColor="rgb(225, 225, 225)",c.value="填色"):1==e&&2==a&&(c.value="填色")}));const p="&nbsp; &nbsp; 涂色数量更多的一队将积一分。",m="&nbsp; &nbsp; 涂色数量更多的一队将积一分。<br/>&nbsp; &nbsp; 另外，下面是你队今日的目标图案，在画布上用自己队伍的颜色完成图案涂色也可以积一分，同时，对方队伍也有一个不同的目标图案，谨慎对方动态，注意及时破坏哦！",f="&nbsp; &nbsp; 涂色数量更多的一队将积一分。<br/>&nbsp; &nbsp; 另外，下面是你队今日的目标图案，在画布上用自己队伍的颜色完成图案涂色也可以积一分，同时，对方队伍也有一个不同的目标图案，谨慎对方动态，注意及时破坏哦！";let y,S=(0,o.iH)("默认文字"),_=()=>{let e=document.querySelector(".popupTask");e.style.display="flex";const a=document.querySelector(".redPoint1");"flex"==a.style.display&&(a.style.display="none",console.log(y),localStorage.setItem("task",y))},q=()=>{let e=document.querySelector(".popupTask");e.style.display="none";let a=document.querySelector(".t1"),l=document.querySelector(".t2"),t=document.querySelector(".t3"),o=document.querySelector(".t4");a.style.display="none",l.style.display="none",t.style.display="none",o.style.display="none"},k=(0,o.iH)(!1),C=e=>{k.value=e},T=()=>{C(!0);const e=document.querySelector(".redPoint2");"flex"==e.style.display&&(e.style.display="none",console.log(n.Z.groupLevel.value),localStorage.setItem("groupLevelSit",n.Z.groupLevel.value))},P=()=>{let e=document.querySelector(".popupSituation");e.style.display="none"},b=(0,o.iH)("");(0,t.bv)((()=>{h().get("/task").then((e=>{y=e.data.data.task,console.log("sign",y),1==y?S.value=p:2==y?S.value=m:3==y&&(S.value=f),null==e.data.data.img?(document.querySelector(".taskimage").style.display="none",document.querySelector(".taskTitle").style.display="none"):b.value=e.data.data.img;let a=localStorage.getItem("task");null==a&&(a=0),console.log("oldMission",a);const l=document.querySelector(".redPoint1");l.style.display=a<y?"flex":"none"})).catch((e=>{console.log(e)}));let e=localStorage.getItem("groupLevelSit");null==e&&(e=0),console.log("oldSitSign",e),console.log("user.groupLevel.value",n.Z.groupLevel.value);const a=document.querySelector(".redPoint2");e<n.Z.groupLevel.value?a.style.display="flex":a.style.display="none"}));let U=e=>{let a=document.querySelector(e);console.log(a.style.display);let l=document.querySelector(".t1"),t=document.querySelector(".t2"),o=document.querySelector(".t3"),s=document.querySelector(".t4");l.style.display="none",t.style.display="none",o.style.display="none",s.style.display="none","none"!=a.style.display?a.style.display="none":"none"==a.style.display&&(a.style.display="flex")};return(e,a)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",O,[(0,t._)("div",A,[(0,t._)("div",{class:"btn btnleft",onClick:a[0]||(a[0]=(...e)=>(0,o.SU)(T)&&(0,o.SU)(T)(...e))},Q),(0,t._)("div",{class:"btncenter",onClick:a[1]||(a[1]=(...e)=>(0,o.SU)(v)&&(0,o.SU)(v)(...e))},[(0,t._)("div",ee,(0,s.zw)((0,o.SU)(c)),1)]),(0,t._)("div",{class:"btn btnright",onClick:a[2]||(a[2]=(...e)=>(0,o.SU)(_)&&(0,o.SU)(_)(...e))},te)])]),(0,t._)("div",{class:"popupTask",onClick:a[8]||(a[8]=(...e)=>(0,o.SU)(q)&&(0,o.SU)(q)(...e))},[(0,t._)("div",oe,[se,ne,(0,t._)("div",{class:"taskContainer",onClick:(0,Z.iM)((e=>null),["stop"])},[(0,t._)("div",{class:"taskTitle",onClick:a[3]||(a[3]=e=>(0,o.SU)(U)(".t1"))},"今日任务"),(0,t._)("div",ue,[(0,t._)("div",{class:"taskInfo",innerHTML:(0,o.SU)(S)},null,8,re),(0,t._)("div",{class:"tasksubTitle",onClick:a[4]||(a[4]=e=>(0,o.SU)(U)())},"目标图案:"),(0,t._)("div",ce,[(0,t._)("img",{class:"taskimage",src:(0,o.SU)(b)},null,8,de)])]),(0,t._)("div",{class:"taskTitle",onClick:a[5]||(a[5]=e=>(0,o.SU)(U)(".t2"))},"团队通行证升级"),ge,(0,t._)("div",{class:"taskTitle",onClick:a[6]||(a[6]=e=>(0,o.SU)(U)(".t3"))},"个人填色升级"),ve,(0,t._)("div",{class:"taskTitle",onClick:a[7]||(a[7]=e=>(0,o.SU)(U)(".t4"))},"总福利"),pe],8,ie)])]),(0,t._)("div",{class:"popupSituation",onClick:a[9]||(a[9]=(...e)=>(0,o.SU)(P)&&(0,o.SU)(P)(...e))},[(0,t.Wm)(z,{showSit:(0,o.SU)(k),onChangeShowSit:(0,o.SU)(C)},null,8,["showSit","onChangeShowSit"])]),(0,t._)("div",me,[(0,t._)("div",fe,(0,s.zw)((0,o.SU)(d)),1)])],64))}};const ye=(0,p.Z)(Ze,[["__scopeId","data-v-6222602f"]]);var he=ye,Se=l(1347),_e=l(6284);const qe=e=>((0,t.dD)("data-v-1aaca742"),e=e(),(0,t.Cn)(),e),ke={class:"winPageWarp"},Ce={class:"winCardWarp"},Te={class:"card0"},Pe=["src"],be=qe((()=>(0,t._)("div",null,"青铜哦，再接再厉！",-1))),Ue={class:"card0"},we=["src"],xe=qe((()=>(0,t._)("div",null,"太棒啦，白银能手！",-1))),Be={class:"card0"},Xe=["src"],$e=qe((()=>(0,t._)("div",null,"OMG！已经是黄金啦！",-1))),We=qe((()=>(0,t._)("div",{class:"backToMain"},[(0,t._)("div",{class:"returnTips"},"点击任意地方返回")],-1)));var De={__name:"winnerPage",props:{logo:{}},setup(e){const a=e,{logo:l}=(0,o.BK)(a);let s=(0,o.iH)("");1==n.Z.group.value?s.value="#00d599":2==n.Z.group.value&&(s.value="#ffc500");let i=(0,o.iH)(null),u=(0,o.iH)(null),r=(0,o.iH)(null),c=(0,o.iH)(null),d=(0,o.iH)(null),g=(0,o.iH)(null);(0,t.bv)((()=>{console.log("winner page mounted"),n.Z.groupLevel.value>=2&&(c.value.style.display="none",i.value.style.display="flex"),n.Z.groupLevel.value>=3&&(d.value.style.display="none",u.value.style.display="flex"),n.Z.groupLevel.value>=5&&(g.value.style.display="none",r.value.style.display="flex")})),(0,t.YP)(n.Z.groupLevel,(e=>{2==e?(c.value.style.display="none",i.value.style.display="flex"):3==e||4==e?(c.value.style.display="none",d.value.style.display="none",i.value.style.display="flex",u.value.style.display="flex"):5!=e&&6!=e||(c.value.style.display="none",d.value.style.display="none",g.value.style.display="none",i.value.style.display="flex",u.value.style.display="flex",r.value.style.display="flex")}));let v=()=>{document.querySelector(".popupWinerPage").style.display="none"};return(e,a)=>((0,t.wg)(),(0,t.iD)("div",ke,[(0,t._)("div",{class:"winpageWarp-AD",onClick:a[0]||(a[0]=(...e)=>(0,o.SU)(v)&&(0,o.SU)(v)(...e))},[(0,t.Wm)(Se.Z,{logo:(0,o.SU)(l),clickable:!1},null,8,["logo"]),(0,t._)("section",Ce,[(0,t._)("div",Te,[(0,t._)("div",{ref_key:"cd1",ref:c,class:"cardDefalutText"},"Group Lv.2即可解锁",512),(0,t._)("div",{ref_key:"card1",ref:i,class:"card1"},[(0,t._)("img",{class:"userimg",src:(0,o.SU)(n.Z).userImg},null,8,Pe),be],512)]),(0,t._)("div",Ue,[(0,t._)("div",{ref_key:"cd2",ref:d,class:"cardDefalutText"},"Group Lv.3即可解锁",512),(0,t._)("div",{ref_key:"card2",ref:u,class:"card2"},[(0,t._)("img",{class:"userimg",src:(0,o.SU)(n.Z).userImg},null,8,we),xe],512)]),(0,t._)("div",Be,[(0,t._)("div",{ref_key:"cd3",ref:g,class:"cardDefalutText"},"Group Lv.5即可解锁",512),(0,t._)("div",{ref_key:"card3",ref:r,class:"card3"},[(0,t._)("img",{class:"userimg",src:(0,o.SU)(n.Z).userImg},null,8,Xe),$e],512)])]),We]),(0,t.Wm)(_e.Z)]))}};const He=(0,p.Z)(De,[["__scopeId","data-v-1aaca742"]]);var Me=He;const Ye={class:"popupWinerPage"};var Ie={__name:"topUserInfo",props:{logo:{}},setup(e){const a=e,{logo:l}=(0,o.BK)(a);return(e,a)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(Se.Z,{logo:(0,o.SU)(l),clickable:!0},null,8,["logo"]),(0,t._)("div",Ye,[(0,t.Wm)(Me,{logo:(0,o.SU)(l)},null,8,["logo"])])],64))}};const Ne=(0,p.Z)(Ie,[["__scopeId","data-v-27a06e20"]]);var Le=Ne;const Fe={class:"gameView"},Ge={class:"game fade-in"};var Re={__name:"gameView",setup(e){let a=(0,o.iH)(0),s=(0,o.iH)(!1),u=e=>{a.value=e},r=e=>{s.value=e},c=(0,o.iH)(null);0==n.Z.group.value?i.Z.replace("/loading"):1==n.Z.group.value?c.value=l(463):2==n.Z.group.value&&(c.value=l(7816));let d=new Image;d.src=l(5611);let g=new Image;return g.src=l(2912),(0,t.bv)((()=>{console.log("gameView onMounted")})),(e,l)=>((0,t.wg)(),(0,t.iD)("div",Fe,[(0,t._)("div",Ge,[(0,t.Wm)(Le,{logo:(0,o.SU)(c)},null,8,["logo"]),(0,t.Wm)(f,{mode:(0,o.SU)(a),refresh:(0,o.SU)(s),onChangeMode:(0,o.SU)(u),onChangeRefresh:(0,o.SU)(r)},null,8,["mode","refresh","onChangeMode","onChangeRefresh"]),(0,t.Wm)(he,{mode:(0,o.SU)(a),refresh:(0,o.SU)(s),onChangeMode:(0,o.SU)(u),onChangeRefresh:(0,o.SU)(r)},null,8,["mode","refresh","onChangeMode","onChangeRefresh"]),(0,t.Wm)(_e.Z)])]))}};const Ke=(0,p.Z)(Re,[["__scopeId","data-v-43d55de6"]]);var ze=Ke},5611:function(e,a,l){e.exports=l.p+"img/situation_border.a6fe45a2.png"},2912:function(e,a,l){e.exports=l.p+"img/win_card0.1e8e8f6c.png"}}]);
//# sourceMappingURL=648.b0b6da1b.js.map