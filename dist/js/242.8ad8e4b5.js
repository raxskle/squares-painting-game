"use strict";(self["webpackChunkbypixel"]=self["webpackChunkbypixel"]||[]).push([[242],{4090:function(a,e,l){l.r(e),l.d(e,{default:function(){return Ze}});var t=l(3396),s=l(4870),o=l(7139),n=l(9242),i=l(3194),u=l(626),r=l(6963),c=l(4336),d={getCDtime(){c.Z.get("/user/state").then((a=>{if(1==a.data.data.state)console.log("能draw"),i.Z.CDtime.value=0;else if(0==a.data.data.state){console.log("不能draw");let e=a.data.data.last_paint_time;e>16e11&&(e=Math.ceil(e/1e3));let l=300;if(1==i.Z.group.value){let a=Date.now();a>1662642e6&&a<16626528e5&&(l=180)}let t=e+l,s=Math.floor(Date.now()/1e3);console.log("下一次",t);let o=t-s<0?0:t-s;(o>=l||o<l-2)&&(o=l-1),i.Z.CDtime.value=o,i.Z.timeGoes()}})).catch((a=>{console.log(a)}))}};const v=a=>((0,t.dD)("data-v-61f07306"),a=a(),(0,t.Cn)(),a),g={class:"lastPaintBar"},p=["src"],m=["onClick"],h=["src"],f=v((()=>(0,t._)("div",{class:"shareSaveTips"},"长按图片保存",-1))),Z=v((()=>(0,t._)("div",{class:"popUpabc"},[(0,t._)("span",null,[(0,t._)("br"),(0,t.Uk)(" 欢迎参加！游戏已结束 "),(0,t._)("br"),(0,t._)("br")])],-1))),y=[Z];var _={__name:"mainCanvas",props:{mode:{type:Number,default:0},refresh:{type:Boolean}},emits:["changeMode","changeRefresh"],setup(a,{emit:e}){const l=a,{mode:v,refresh:Z}=(0,s.BK)(l);let _=(0,s.qj)({scaleX:1,scaleY:1}),S="/drill-battle",k=(0,s.iH)("shareIcon.png"),b=(0,s.iH)("");b.value=`${S}/shareImg${i.Z.group.value}.jpg`,r.Z.initCanvasData();let q=r.Z.configKonva;r.Z.fillConfigKonva();let U=r.Z.configField;r.Z.fillconfigField();let C=r.Z.configSquares;r.Z.fillConfigSquares();let T,P,w=(0,s.iH)(null),x=(0,s.iH)(null),D=(0,s.iH)(null),H={squareName:"square0",squareId:-1,stroke:"#c8c8c8",strokeWidth:1},$=a=>{T=a.target.parent.attrs.x,P=a.target.parent.attrs.y},B=(0,s.qj)({scale:1,centerX0:0,centerY0:0,centerXf:0,centerYf:0,oldDistance:0}),W=(a,e)=>Math.hypot(a.x-e.x,a.y-e.y),X=(a,e)=>({x:(a.x+e.x)/2,y:(a.y+e.y)/2}),M=a=>{if(void 0==a.evt&&2==a.touches.length){let e={x:a.touches[0].clientX,y:a.touches[0].clientY},l={x:a.touches[1].clientX,y:a.touches[1].clientY},t=W(e,l);B.oldDistance=t;let s=X(e,l),o=document.querySelector("#canvasContainer").getBoundingClientRect().x,n=document.querySelector("#canvasContainer").getBoundingClientRect().y;B.centerX0=s.x-o,B.centerY0=s.y-n,B.centerXf=(B.centerX0-T)/B.scale*r.Z.fieldScale0,B.centerYf=(B.centerY0-P)/B.scale*r.Z.fieldScale0}},Y=a=>{void 0==a.evt&&(B.oldDistance=0)},I=a=>{if(void 0==a.evt){if(0!=B.oldDistance&&2==a.changedTouches.length){let e={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY},l={x:a.changedTouches[1].clientX,y:a.changedTouches[1].clientY},t=W(e,l),s=.08*r.Z.squareXnum/25,o=t/B.oldDistance*s;o>1.5*s?o=1.5*s:o<.7*s&&(o=.7*s),o>1*s?B.scale=B.scale+o>4?4:B.scale+o:o<1*s&&(B.scale=B.scale-o>4?4:B.scale-o),B.scale<1&&(B.scale=1),B.scale>4*r.Z.squareXnum/25&&(B.scale=4*r.Z.squareXnum/25),1==B.scale?(r.Z.configField.scaleX=r.Z.fieldScale0,r.Z.configField.scaleY=r.Z.fieldScale0,r.Z.configField.x=r.Z.fieldX0,r.Z.configField.y=r.Z.fieldY0,r.Z.configField.draggable=!0,r.Z.configField.dragBoundFunc=function(){return{x:r.Z.fieldX0,y:r.Z.fieldY0}}):B.scale>1&&(r.Z.configField.draggable=!1,r.Z.configField.scaleX=B.scale*r.Z.fieldScale0,r.Z.configField.scaleY=B.scale*r.Z.fieldScale0,r.Z.configField.x=B.centerX0-B.centerXf*B.scale*r.Z.fieldScale0,r.Z.configField.y=B.centerY0-B.centerYf*B.scale*r.Z.fieldScale0),B.oldDistance=t}1==a.changedTouches.length&&(1==B.scale?(r.Z.configField.draggable=!0,r.Z.configField.dragBoundFunc=function(){return{x:r.Z.fieldX0,y:r.Z.fieldY0}}):B.scale>1&&(r.Z.configField.draggable=!0,r.Z.configField.dragBoundFunc=function(a){let e=a.y;e=a.y>.3*r.Z.stageHeight?.3*r.Z.stageHeight:a.y<r.Z.stageHeight-r.Z.fieldHeight*r.Z.configField.scaleY-.3*r.Z.stageHeight?r.Z.stageHeight-r.Z.fieldHeight*r.Z.configField.scaleY-.3*r.Z.stageHeight:a.y;let l=a.x;return l=a.x>.3*r.Z.stageWidth?.3*r.Z.stageWidth:a.x<r.Z.stageWidth-r.Z.fieldWidth*r.Z.configField.scaleX-.3*r.Z.stageWidth?r.Z.stageWidth-r.Z.fieldWidth*r.Z.configField.scaleX-.3*r.Z.stageWidth:a.x,{x:l,y:e}}))}},L=()=>{console.log("into drawCanvas更新画布");for(let a=0;a<r.Z.squareYnum;a++)for(let e=0;e<r.Z.squareXnum;e++)r.Z.configSquares[a*r.Z.squareXnum+e].fill=r.Z.squareColor(a,e),r.Z.configSquares[a*r.Z.squareXnum+e].occupy=r.Z.setOccupy(a,e);-1!=r.Z.latestPosition.value[0]&&-1!=r.Z.latestPosition.value[1]&&(-1!=r.Z.lastPosition.value[0]&&-1!=r.Z.lastPosition.value[1]&&(r.Z.configSquares[r.Z.lastPosition.value[0]*r.Z.squareXnum+r.Z.lastPosition.value[1]].stroke="rgb(200, 200, 200)"),r.Z.configSquares[r.Z.latestPosition.value[0]*r.Z.squareXnum+r.Z.latestPosition.value[1]].stroke="black",x.value.getStage().find(`.square${r.Z.latestPosition.value[0]*r.Z.squareXnum+r.Z.latestPosition.value[1]}`)[0].moveToTop())},N=()=>{c.Z.get("/canvas").then((a=>{if(r.Z.canvasState.value=a.data.data.canvas,r.Z.canvasState.value.length!=r.Z.squareYnum&&(u.Z.replace("/loading"),location.reload(!0)),r.Z.lastPosition.value=r.Z.latestPosition.value,r.Z.group1Num.value=a.data.data.pixels_num.group_1,r.Z.group2Num.value=a.data.data.pixels_num.group_2,null==a.data.data.last_paint?r.Z.latestPosition.value=[-1,-1]:r.Z.latestPosition.value=a.data.data.last_paint.pixel_position,null!=a.data.data.last_paint){if(r.Z.lastPaintTime.value==a.data.data.last_paint.time&&r.Z.lastPaintName.value==a.data.data.last_paint.nickname){let e,l=Math.floor(Date.now()/1e3);e=a.data.data.last_paint.time>16e11?Math.ceil(a.data.data.last_paint.time/1e3):a.data.data.last_paint.time,r.Z.lastPaintMin.value=Math.floor((l-e)/60),console.log("canvas.lastPaintMin.value",r.Z.lastPaintMin.value)}r.Z.lastPaintTime.value=a.data.data.last_paint.time,r.Z.lastPaintName.value=a.data.data.last_paint.nickname,r.Z.lastPaintGroup.value=a.data.data.last_paint.group}else r.Z.lastPaintTime.value=0;L()})).catch((a=>{console.log("请求canvas发生错误：",a)}))};setInterval(N,2e4),(0,t.YP)(Z,(a=>{1==a&&(N(),H.squareId=-1,H.squareName="square0",e("changeRefresh",!1))}));let F=()=>{1==v.value&&e("changeMode",2)};(0,t.YP)(v,((a,e)=>{if(1==a)for(let l=0;l<r.Z.squareYnum;l++)for(let a=0;a<r.Z.squareXnum;a++)3!=r.Z.configSquares[l*r.Z.squareXnum+a].occupy?r.Z.configSquares[l*r.Z.squareXnum+a].strokeWidth=1:3==r.Z.configSquares[l*r.Z.squareXnum+a].occupy&&x.value.getStage().find(`.square${l*r.Z.squareXnum+a}`)[0].moveToBottom();else if(0==a)for(let l=0;l<r.Z.squareYnum;l++)for(let a=0;a<r.Z.squareXnum;a++)3!=r.Z.configSquares[l*r.Z.squareXnum+a].occupy&&(r.Z.configSquares[l*r.Z.squareXnum+a].strokeWidth=0);if(1==a&&2==e){let a=x.value.getStage().find(`.${H.squareName}`)[0];a.attrs.strokeWidth=H.strokeWidth,a.attrs.stroke=H.stroke,a.moveToBottom()}}));let G,j,R=function(a){if(1==v.value||2==v.value){if(i.Z.group.value!=a.target.attrs.occupy&&3!=a.target.attrs.occupy){let e=a.target.attrs.name,l=e.slice(6);console.log("click this ",l);let t=Math.floor(l/r.Z.squareXnum),s=l%r.Z.squareXnum,o=[];o.push(t),o.push(s),console.log(o),r.Z.targetSquare.value=o,F();let n=x.value.getStage();if(-1!=H.squareId){console.log("恢复上一个");let a=n.find(`.${H.squareName}`)[0];console.log("lastTarget.attrs",a.attrs),console.log("saveSquare.squareName"),a.attrs.strokeWidth=H.strokeWidth,a.attrs.stroke=H.stroke,"black"!=a.attrs.stroke&&a.moveToBottom();let e=Number(H.squareId)+Number(r.Z.squareXnum);e<r.Z.squareXnum*r.Z.squareYnum&&3==n.find(`.square${e}`)[0].attrs.occupy&&n.find(`.square${e}`)[0].moveToBottom();let l=Number(H.squareId)-Number(r.Z.squareXnum);l>=0&&3==n.find(`.square${l}`)[0].attrs.occupy&&n.find(`.square${l}`)[0].moveToBottom();let t=Number(H.squareId)-1;t>=0&&3==n.find(`.square${t}`)[0].attrs.occupy&&n.find(`.square${t}`)[0].moveToBottom();let s=Number(H.squareId)+1;s<r.Z.squareXnum*r.Z.squareYnum&&3==n.find(`.square${s}`)[0].attrs.occupy&&n.find(`.square${s}`)[0].moveToBottom()}else console.log("初次选择");let i=n.find(`.${e}`)[0];H.squareName=i.attrs.name,H.squareId=l,H.stroke=i.attrs.stroke,H.strokeWidth=i.attrs.strokeWidth,console.log("保存当前的stroke",H.stroke),i.moveToTop(),i.attrs.strokeWidth=3,i.attrs.stroke="#c8c8c8"}}else 0==v.value&&a.evt.changedTouches.length<=1&&0==a.evt.targetTouches.length?0==i.Z.CDtime.value&&e("changeMode",1):3==v.value&&console.log("游戏已结束，不可点击")},K=r.Z.lastPaintTime.value,z=r.Z.lastPaintName.value;if(z.length>8&&(z=z.slice(0,8)+"..."),0==K)j="";else if(K>0){K>16e11&&(K=Math.ceil(K/1e3));let a=Math.floor(Date.now()/1e3);G=Math.floor((a-K)/60),G<0&&(G=0);let e=0;G>=60?(e=Math.floor(G/60),G%=60,j=e>100?`很久以前“${z}”涂色`:`${e}小时${G}分钟前“${z}”涂色`):j=0==G?`刚刚“${z}”涂色`:`${G}分钟前“${z}”涂色`}let E=(0,s.iH)(j);(0,t.bv)((()=>{-1!=r.Z.latestPosition.value[0]&&-1!=r.Z.latestPosition.value[1]&&x.value.getStage().find(`.square${r.Z.latestPosition.value[0]*r.Z.squareXnum+r.Z.latestPosition.value[1]}`)[0].moveToTop();let a=document.querySelector(".lastPaintBar");console.log("set color :canvas.lastPaintGroup.value",r.Z.lastPaintGroup.value),1==r.Z.lastPaintGroup.value?a.style.backgroundColor="#00d599":2==r.Z.lastPaintGroup.value&&(a.style.backgroundColor="#ffc500"),K>0&&(document.querySelector(".lastPaintBar").className="lastPaintBar fade-in")})),(0,t.YP)(r.Z.lastPaintTime,(a=>{if(a>0){z=r.Z.lastPaintName.value,z.length>8&&(z=z.slice(0,8)+"..."),K=r.Z.lastPaintTime.value,K>16e11&&(K=Math.ceil(K/1e3));let a=Math.floor(Date.now()/1e3);G=Math.floor((a-K)/60),G<0&&(G=0),document.querySelector(".lastPaintBar").className+=" fade-out",setTimeout((()=>{let a=document.querySelector(".lastPaintBar");console.log("set color :canvas.lastPaintGroup.value",r.Z.lastPaintGroup.value),1==r.Z.lastPaintGroup.value?a.style.backgroundColor="#00d599":2==r.Z.lastPaintGroup.value&&(a.style.backgroundColor="#ffc500");let e=0;G>=60?(e=Math.floor(G/60),G%=60,j=e>100?`很久以前“${z}”涂色`:0==G?`${e}小时前“${z}”涂色`:`${e}小时${G}分钟前“${z}”涂色`):j=0==G?`刚刚“${z}”涂色`:`${G}分钟前“${z}”涂色`,E.value=j,document.querySelector(".lastPaintBar").className="lastPaintBar fade-in"}),1e3)}else 0==a&&(j="",E.value=j,document.querySelector(".lastPaintBar").className="lastPaintBar fade-out")})),(0,t.YP)(r.Z.lastPaintMin,(a=>{let e=0;a>=60?(e=Math.floor(a/60),a%=60,j=e>100?`很久以前“${z}”涂色`:0==a?`${e}小时前“${z}”涂色`:`${e}小时${a}分钟前“${z}”涂色`):j=0==a?`刚刚“${z}”涂色`:`${a}分钟前“${z}”涂色`,E.value=j;let l=document.querySelector(".lastPaintBar");console.log("set color :canvas.lastPaintGroup.value",r.Z.lastPaintGroup.value),1==r.Z.lastPaintGroup.value?l.style.backgroundColor="#00d599":2==r.Z.lastPaintGroup.value&&(l.style.backgroundColor="#ffc500")}));let V,O=(0,s.iH)(!1),A=()=>{O.value=!0},J=()=>{O.value=!1},Q=(0,s.iH)(!1),aa=()=>{V=setTimeout((()=>{c.Z.put("/user/cooling").then((()=>{console.log("send put request"),Q.value=!0})).catch((a=>{console.log(a)}))}),200)};(0,t.YP)(Q,(a=>{1==a&&(c.Z.get("/user/state").then((a=>{console.log(a),d.getCDtime()})).catch((a=>{console.log(a)})),Q=!1)}));let ea=()=>{clearTimeout(V)},la=(0,s.iH)(!1);la.value=!0;let ta=()=>{la.value=!1};return(a,e)=>{const l=(0,t.up)("v-rect"),i=(0,t.up)("v-group"),u=(0,t.up)("v-layer"),r=(0,t.up)("v-stage");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",{ref_key:"cc",ref:w,id:"canvasContainer"},[(0,t._)("div",g,(0,o.zw)((0,s.SU)(E)),1),(0,t._)("div",{class:"shareBtn",onClick:e[0]||(e[0]=(...a)=>(0,s.SU)(A)&&(0,s.SU)(A)(...a))},[(0,t._)("img",{src:(0,s.SU)(k)},null,8,p)]),(0,t.Wm)(r,{ref_key:"stage",ref:x,config:(0,s.SU)(q),onTouchmove:(0,s.SU)(I),onTouchstart:(0,s.SU)(M),onTouchend:(0,s.SU)(Y)},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{ref:"layer",config:(0,s.SU)(_)},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{ref_key:"Field",ref:D,config:(0,s.SU)(U),onTouchstart:(0,s.SU)($)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,s.SU)(C),((a,e)=>((0,t.wg)(),(0,t.j4)(l,{key:e,config:a,onTouchend:(0,s.SU)(R)},null,8,["config","onTouchend"])))),128))])),_:1},8,["config","onTouchstart"])])),_:1},8,["config"])])),_:1},8,["config","onTouchmove","onTouchstart","onTouchend"])],512),(0,s.SU)(O)?((0,t.wg)(),(0,t.iD)("div",{key:0,class:"sharePage",onClick:e[3]||(e[3]=(...a)=>(0,s.SU)(J)&&(0,s.SU)(J)(...a))},[(0,t._)("div",{class:"shareBox",onClick:(0,n.iM)((a=>null),["stop"])},[(0,t._)("img",{src:(0,s.SU)(b),onTouchstart:e[1]||(e[1]=(...a)=>(0,s.SU)(aa)&&(0,s.SU)(aa)(...a)),onTouchend:e[2]||(e[2]=(...a)=>(0,s.SU)(ea)&&(0,s.SU)(ea)(...a))},null,40,h),f],8,m)])):(0,t.kq)("",!0),(0,s.SU)(la)?((0,t.wg)(),(0,t.iD)("div",{key:1,class:"abcWarp",onClick:e[4]||(e[4]=(...a)=>(0,s.SU)(ta)&&(0,s.SU)(ta)(...a))},y)):(0,t.kq)("",!0)],64)}}},S=l(89);const k=(0,S.Z)(_,[["__scopeId","data-v-61f07306"]]);var b=k,q=l.p+"img/jiavx.acb5b074.jpg",U=l(6265),C=l.n(U),T=l(7816),P=l(463),w=l(6350);const x=a=>((0,t.dD)("data-v-3291dbc1"),a=a(),(0,t.Cn)(),a),D={class:"scoreBar"},H=x((()=>(0,t._)("div",{class:"gridBorder"},null,-1))),$=x((()=>(0,t._)("div",{class:"scoreTitle"},"已涂色块数目",-1))),B={class:"scoreBox"},W=(0,t.uE)('<div class="scoreGroup" data-v-3291dbc1><div class="groupNameImg" data-v-3291dbc1><div class="groupImg" data-v-3291dbc1><img src="'+T+'" data-v-3291dbc1></div><div class="groupName" data-v-3291dbc1>   种太阳队</div></div><div class="groupNameImg" data-v-3291dbc1><div class="groupName" data-v-3291dbc1>吃西瓜队  </div><div class="groupImg" data-v-3291dbc1><img src="'+P+'" data-v-3291dbc1></div></div></div>',1),X={class:"vsBox"},M={class:"groupNum"},Y=x((()=>(0,t._)("div",{class:"vs"},"VS",-1))),I={class:"groupNum"},L=x((()=>(0,t._)("div",{class:"gridBorder"},null,-1))),N={class:"wholeView"},F=x((()=>(0,t._)("div",{class:"rankingTitle"},"累计排行榜",-1))),G={class:"rangkingWarp"},j={class:"bottomBar"},R=x((()=>(0,t._)("div",{class:"gridBorder"},null,-1))),K={class:"scrollBar"},z={class:"animate"},E=x((()=>(0,t._)("div",{class:"gridBorder"},null,-1))),V=x((()=>(0,t._)("div",{class:"returnTips"},"点击任意地方返回",-1)));var O={__name:"situation",props:{showSit:{type:Boolean}},emits:["changeShowSit"],setup(a,{emit:e}){const l=a;let{showSit:n}=(0,s.BK)(l),i=(0,s.iH)(!0),u=()=>{i.value=!1,setTimeout((()=>{i.value=!0}),10)};(0,t.YP)(n,(a=>{if(1==a){let a=document.querySelector(".popupSituation");a.style.display="flex",e("changeShowSit",!1)}}));let c=16625664e5,d=Date.now();console.log("day2",c),console.log("daynow",d);let v=(0,s.iH)("");return 1==r.Z.group1CompleteTarget.value&&1==r.Z.group2CompleteTarget.value?v.value="偷瓜队已完成目标拼图！     射日队已完成目标拼图！":1==r.Z.group1CompleteTarget.value?v.value="偷瓜队已完成目标拼图！":1==r.Z.group2CompleteTarget.value?v.value="射日队已完成目标拼图！":v.value=d<c?"涂色更多的一队在明天可以获得特制头像框哦":"",(0,t.YP)(r.Z.group1CompleteTarget,(a=>{1==a&&(1==r.Z.group2CompleteTarget.value?v.value="偷瓜队已完成目标拼图！     射日队已完成目标拼图！":v.value="偷瓜队已完成目标拼图！")})),(0,t.YP)(r.Z.group2CompleteTarget,(a=>{1==a&&(1==r.Z.group1CompleteTarget.value?v.value="偷瓜队已完成目标拼图！     射日队已完成目标拼图！":v.value="射日队已完成目标拼图！")})),(a,e)=>((0,t.wg)(),(0,t.iD)("div",{class:"situation",onClick:e[0]||(e[0]=(...a)=>(0,s.SU)(u)&&(0,s.SU)(u)(...a))},[(0,t._)("div",D,[H,$,(0,t._)("div",B,[W,(0,t._)("div",X,[(0,t._)("div",M,(0,o.zw)((0,s.SU)(r.Z).group2Num),1),Y,(0,t._)("div",I,(0,o.zw)((0,s.SU)(r.Z).group1Num),1)])]),L]),(0,t._)("div",N,[F,(0,t._)("div",G,[(0,s.SU)(i)?((0,t.wg)(),(0,t.j4)(w.Z,{key:0})):(0,t.kq)("",!0)])]),(0,t._)("div",j,[R,(0,t._)("div",K,[(0,t._)("p",z,(0,o.zw)((0,s.SU)(v)),1)]),E]),V]))}};const A=(0,S.Z)(O,[["__scopeId","data-v-3291dbc1"]]);var J=A;const Q=a=>((0,t.dD)("data-v-2ad29ea8"),a=a(),(0,t.Cn)(),a),aa={class:"bar"},ea={class:"btnBox"},la=Q((()=>(0,t._)("div",{class:"redPoint2"},null,-1))),ta={id:"drawBtn",class:"btncenterChange"},sa=Q((()=>(0,t._)("div",{class:"redPoint1"},null,-1))),oa={class:"taskWindow"},na=Q((()=>(0,t._)("div",{class:"taskX"},null,-1))),ia=Q((()=>(0,t._)("h2",null,"游戏规则",-1))),ua=["onClick"],ra=Q((()=>(0,t._)("div",{class:"taskWarptop"},[(0,t._)("span",null,[(0,t.Uk)(" 欢迎来到军训大对抗！ "),(0,t._)("br"),(0,t._)("br"),(0,t.Uk)(" 作为军训期间限定小游戏，本游戏将持续3天(9.7-9.9)。 "),(0,t._)("br"),(0,t._)("br"),(0,t.Uk)(" 种太阳队vs吃西瓜队，队伍每日有至多两次的升级机会。级数更高的一队将取得游戏的最终胜利！ ")])],-1))),ca={class:"taskWarp t1"},da={class:"taskInfo"},va={key:0,class:"task11"},ga=Q((()=>(0,t._)("span",null,[(0,t.Uk)("当天"),(0,t._)("span",{class:"highLight"},"涂色数量"),(0,t.Uk)("更多的一队将升一级。")],-1))),pa=[ga],ma={key:1,class:"task12"},ha=Q((()=>(0,t._)("span",null,[(0,t.Uk)("当天"),(0,t._)("span",{class:"highLight"},"涂色数量"),(0,t.Uk)("更多的队伍将升一级。"),(0,t._)("br"),(0,t._)("br"),(0,t.Uk)("当天完成过一次"),(0,t._)("span",{class:"highLight"},"目标图案"),(0,t.Uk)("涂色的队伍将升一级。")],-1))),fa=[ha],Za={key:2,class:"task13"},ya=Q((()=>(0,t._)("span",null,[(0,t.Uk)("当天"),(0,t._)("span",{class:"highLight"},"涂色数量"),(0,t.Uk)("更多的队伍将升一级。"),(0,t._)("br"),(0,t._)("br"),(0,t.Uk)("当天完成过一次"),(0,t._)("span",{class:"highLight"},"目标图案"),(0,t.Uk)("涂色的队伍将升一级。")],-1))),_a=[ya],Sa={class:"taskImg"},ka=["src"],ba=Q((()=>(0,t._)("div",{class:"taskWarp t2"},[(0,t._)("div",{class:"taskInfo"},[(0,t._)("span",null,[(0,t.Uk)(" 队伍升级解锁相应"),(0,t._)("span",{class:"highLight"},"通行证"),(0,t.Uk)("，点击涂色页面右上方图标可查看。 "),(0,t._)("br"),(0,t._)("br"),(0,t.Uk)(" 团队升至Lv.3时可以解锁"),(0,t._)("span",{class:"highLight"},"特制头像框"),(0,t.Uk)("。 ")])])],-1))),qa=(0,t.uE)('<div class="taskWarp t3" data-v-2ad29ea8><div class="taskInfo" data-v-2ad29ea8><span data-v-2ad29ea8> 当日<span class="highLight" data-v-2ad29ea8>涂色6块</span>升一级，当日<span class="highLight" data-v-2ad29ea8>涂色15块</span>可再升一级。 <br data-v-2ad29ea8><br data-v-2ad29ea8> 升级后<span class="highLight" data-v-2ad29ea8>填色颜料</span>会相应升级，点击头像可查看<span class="highLight" data-v-2ad29ea8>排行榜</span>。 </span></div></div>',1),Ua=(0,t.uE)('<div class="taskWarp t4" data-v-2ad29ea8><div class="taskInfo" data-v-2ad29ea8><span data-v-2ad29ea8> 游戏维持<span class="highLight" data-v-2ad29ea8>3天</span>，凭借最终通行证等级可以兑换相应<span class="highLight" data-v-2ad29ea8>水果捞满减</span>券。 <br data-v-2ad29ea8><br data-v-2ad29ea8>排行榜<span class="highLight" data-v-2ad29ea8>前30位</span>可以抽取<span class="highLight" data-v-2ad29ea8>实物周边惊喜盲盒</span>。 <br data-v-2ad29ea8><br data-v-2ad29ea8>具体兑换方式将在<span class="highLight" data-v-2ad29ea8>最后一天（9月9日）</span>公布。 </span></div></div>',1),Ca={class:"popupTips"},Ta={class:"tipsText"},Pa={class:"popUpabc"},wa=["onClick"],xa=(0,t.uE)('<h2 class="highLight" data-v-2ad29ea8>团队及成员</h2><span data-v-2ad29ea8><span data-v-2ad29ea8>团队：</span><br data-v-2ad29ea8> 本游戏由<a href="https://mp.weixin.qq.com/s/8gd4jEPklJM0Ki2S3-FmdQ" data-v-2ad29ea8>冰岩作坊</a>团队制作 <br data-v-2ad29ea8></span><span data-v-2ad29ea8><br data-v-2ad29ea8><span data-v-2ad29ea8>项目组成员：</span><br data-v-2ad29ea8> 项目总负责：TuTu <br data-v-2ad29ea8> 创意：鸬鹚 <br data-v-2ad29ea8> 游戏策划：TuTu/Devotion/小西霉 <br data-v-2ad29ea8> 前端：可乐 <br data-v-2ad29ea8> 后端：小尹 <br data-v-2ad29ea8> 设计：玛卡煋 <br data-v-2ad29ea8></span><h2 class="highLight" data-v-2ad29ea8>我们想说：</h2><span data-v-2ad29ea8> 首先，感谢你参加我们的小游戏。 <br data-v-2ad29ea8><br data-v-2ad29ea8> 其次，我们想说声抱歉。因为我们的考虑不周，游戏有许多不足之处，比如两队人数差距悬殊。 <br data-v-2ad29ea8><br data-v-2ad29ea8> 从创意产生，到开发、运营，项目组每一个人都在尽力改进。若有不足，还望包涵。 <br data-v-2ad29ea8><br data-v-2ad29ea8> 欢迎加入我们！期待和你再次相见！ <br data-v-2ad29ea8><br data-v-2ad29ea8></span>',5),Da=[xa],Ha={class:"popUpabc"},$a={class:"popUpabcIn"},Ba=["onClick"],Wa=Q((()=>(0,t._)("h2",{class:"highLight"},"水果捞满减",-1))),Xa=(0,t.uE)(' 种太阳队Group lv.4，获满<span class="jiacu" data-v-2ad29ea8>20元-6元</span>福利。 <br data-v-2ad29ea8> 吃西瓜队Group lv.2，获满<span class="jiacu" data-v-2ad29ea8>20元-4元</span>福利。 <br data-v-2ad29ea8><br data-v-2ad29ea8><span class="jiacu" data-v-2ad29ea8>可用时间：</span><br data-v-2ad29ea8> 2022年9月10日——2022年9月17日。 <br data-v-2ad29ea8><br data-v-2ad29ea8><span class="jiacu" data-v-2ad29ea8>可用门店：</span><br data-v-2ad29ea8> 夏记水果捞（绝望坡必胜客对面），蜜果C水果捞（生活区门附近）。<span class="jiacu" data-v-2ad29ea8>（可通过导航查询）</span><br data-v-2ad29ea8><br data-v-2ad29ea8><span class="rewardColor" data-v-2ad29ea8>付款前请主动将此券出示给营业员。</span><br data-v-2ad29ea8>',22),Ma={class:"rewardCard"},Ya=["src"],Ia=Q((()=>(0,t._)("br",null,null,-1))),La=Q((()=>(0,t._)("h2",{class:"highLight"},"神秘华科周边",-1))),Na=Q((()=>(0,t._)("span",null," 请上榜的30名同学扫码加负责人微信，进行领奖。（截至2022/9/11） ",-1))),Fa=Q((()=>(0,t._)("div",{class:"jiavx"},[(0,t._)("img",{class:"jiavximg",src:q})],-1)));var Ga={__name:"bottomBar",props:{mode:{type:Number},refresh:{type:Boolean}},emits:["changeMode","changeRefresh"],setup(a,{emit:e}){const l=a;let u,{mode:c}=(0,s.BK)(l);1==i.Z.group.value?u="#00d599":2==i.Z.group.value&&(u="#ffc500");let v=(0,s.iH)("战况"),g=(0,s.iH)("规则"),p=(0,s.iH)("填色");if(i.Z.CDtime.value<=0)p.value="填色";else if(i.Z.CDtime.value>0){let a=(0,s.iH)(Math.floor(i.Z.CDtime.value/60)),e=(0,s.iH)(i.Z.CDtime.value%60);e.value<10&&(e.value=`0${e.value}`),p.value=`${a.value}:${e.value}`}(0,t.YP)(i.Z.CDtime,(a=>{if(console.log("cd时间更新"),0==a||a<0)p.value="填色";else{let a=(0,s.iH)(Math.floor(i.Z.CDtime.value/60)),e=(0,s.iH)(i.Z.CDtime.value%60);e.value<10&&(e.value=`0${e.value}`),p.value=`${a.value}:${e.value}`}3==c.value&&(p.value="填色")}));let m,h=(0,s.iH)(""),f=function(a,e){let l=2e3;1==e&&(l=5e3),h.value=a;let t=document.querySelector(".popupTips");t.className="popupTips scale-in-center",setTimeout((()=>{t.className="popupTips scale-out-center"}),l)},Z=()=>{if(1==c.value)e("changeMode",0);else if(0==c.value)C().get("/user/state").then((a=>{console.log(a),1==a.data.data.state&&i.Z.CDtime.value<=0?e("changeMode",1):f("点击画布右上角的转发按钮，分享游戏即可获得一次冷却时间清零。",1)})).catch((a=>{console.log(a)}));else if(2==c.value){let a={position:r.Z.targetSquare.value},l="/canvas";0,C().post(l,a).then((a=>{if(console.log(a),0==a.data.data.conflicting&&0==a.data.data.cooling){if(f("填色成功！"),e("changeMode",0),e("changeRefresh",!0),d.getCDtime(),1==a.data.data.is_user_upgraded&&(console.log("user升级了"),i.Z.level.value=a.data.data.user_level),1==a.data.data.is_group_upgraded){console.log("group升级了"),1==i.Z.group.value&&(r.Z.group1Level.value=a.data.data.group_level),2==i.Z.group.value&&(r.Z.group2Level.value=a.data.data.group_level),i.Z.groupLevel.value=a.data.data.group_level;let e=localStorage.getItem("groupLevelSit1");null==e&&(e=0);let l=localStorage.getItem("groupLevelCard1");if(null==l&&(l=0),e<i.Z.groupLevel.value){const a=document.querySelector(".redPoint2");a.style.display="flex"}C().get("/group/status").then((a=>{console.log(a),r.Z.group1CompleteTarget.value=a.data.data.groups[0].complete_target,r.Z.group2CompleteTarget.value=a.data.data.groups[1].complete_target})).catch((a=>{console.log(a)}))}}else 1==a.data.data.conflicting?f("你选择的方格已被你的阵营填色，请重新选择！"):1==a.data.data.cooling&&f("填色失败，请重试！"),e("changeMode",1),e("changeRefresh",!0)})).catch((a=>{console.log(a)}))}else 3==c.value&&console.log("游戏已结束")};(0,t.YP)(c,((a,e)=>{const l=document.querySelector("#drawBtn");console.log("mode change ",a),1==a&&0==e?(l.style.backgroundColor=u,p.value="填色"):0==a&&1==e?(l.style.backgroundColor="rgb(225, 225, 225)",p.value="填色"):2==a?p.value="确认":0==a&&2==e?(l.style.backgroundColor="rgb(225, 225, 225)",p.value="填色"):1==a&&2==e&&(p.value="填色")}));let y=()=>{let a=document.querySelector(".popupTask");a.style.display="none";let e=document.querySelector(".t1"),l=document.querySelector(".t2"),t=document.querySelector(".t3"),s=document.querySelector(".t4");e.style.display="none",l.style.display="none",t.style.display="none",s.style.display="none"},_=(0,s.iH)(!1),S=a=>{_.value=a},k=()=>{let a=document.querySelector(".popupSituation");a.style.display="none"},b=(0,s.iH)(""),q=(0,s.iH)(!1),U=(0,s.iH)(!1),T=(0,s.iH)(!1);(0,t.bv)((()=>{C().get("/task").then((a=>{m=a.data.data.task,console.log("sign",m),1==m?q.value=!0:2==m?U.value=!0:3==m&&(T.value=!0),null==a.data.data.img?(document.querySelector(".taskImg").style.display="none",document.querySelector(".tasksubTitle").style.display="none"):b.value=a.data.data.img;let e=localStorage.getItem("task1");null==e&&(e=0),console.log("oldMission",e);const l=document.querySelector(".redPoint1");l.style.display=e<m?"flex":"none"})).catch((a=>{console.log(a)}));let a=localStorage.getItem("groupLevelSit1");null==a&&(a=0),console.log("oldSitSign",a),console.log("user.groupLevel.value",i.Z.groupLevel.value);const e=document.querySelector(".redPoint2");a<i.Z.groupLevel.value?(e.style.display="flex",e.style.display="none"):e.style.display="none"}));let P=a=>{let e=document.querySelector(a);console.log(e.style.display);let l=document.querySelector(".t1"),t=document.querySelector(".t2"),s=document.querySelector(".t3"),o=document.querySelector(".t4");l.style.display="none",t.style.display="none",s.style.display="none",o.style.display="none","none"!=e.style.display?e.style.display="none":"none"==e.style.display&&(e.style.display="flex")};3==c.value&&(p.value="填色",v.value="关于我们",g.value="领奖方式");let w=(0,s.iH)(!1),x=(0,s.iH)(!1),D=()=>{w.value=!0},H=()=>{w.value=!1},$=()=>{x.value=!0},B=()=>{x.value=!1},W=(0,s.iH)("");return 1==i.Z.group.value?W.value="reward1.png":2==i.Z.group.value&&(W.value="reward2.png"),(0,t.YP)(x,(a=>{1==a&&setTimeout((()=>{1==i.Z.group.value?document.querySelector(".rewardColor").style.color="#00d599":2==i.Z.group.value&&(document.querySelector(".rewardColor").style.color="#ffc500")}),10)})),(a,e)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",aa,[(0,t._)("div",ea,[(0,t._)("div",{class:"btn btnleft",onClick:e[0]||(e[0]=(...a)=>(0,s.SU)(D)&&(0,s.SU)(D)(...a))},[la,(0,t.Uk)(" "+(0,o.zw)((0,s.SU)(v)),1)]),(0,t._)("div",{class:"btncenter",onClick:e[1]||(e[1]=(...a)=>(0,s.SU)(Z)&&(0,s.SU)(Z)(...a))},[(0,t._)("div",ta,(0,o.zw)((0,s.SU)(p)),1)]),(0,t._)("div",{class:"btn btnright",onClick:e[2]||(e[2]=(...a)=>(0,s.SU)($)&&(0,s.SU)($)(...a))},[sa,(0,t.Uk)(" "+(0,o.zw)((0,s.SU)(g)),1)])])]),(0,t._)("div",{class:"popupTask",onClick:e[8]||(e[8]=(...a)=>(0,s.SU)(y)&&(0,s.SU)(y)(...a))},[(0,t._)("div",oa,[na,ia,(0,t._)("div",{class:"taskContainer",onClick:(0,n.iM)((a=>null),["stop"])},[ra,(0,t._)("div",{class:"taskTitle",onClick:e[3]||(e[3]=a=>(0,s.SU)(P)(".t1"))},"团队今日任务"),(0,t._)("div",ca,[(0,t._)("div",da,[(0,s.SU)(q)?((0,t.wg)(),(0,t.iD)("div",va,pa)):(0,t.kq)("",!0),(0,s.SU)(U)?((0,t.wg)(),(0,t.iD)("div",ma,fa)):(0,t.kq)("",!0),(0,s.SU)(T)?((0,t.wg)(),(0,t.iD)("div",Za,_a)):(0,t.kq)("",!0)]),(0,t._)("div",{class:"tasksubTitle",onClick:e[4]||(e[4]=a=>(0,s.SU)(P)())},"目标图案:"),(0,t._)("div",Sa,[(0,t._)("img",{class:"taskimage",src:(0,s.SU)(b)},null,8,ka)])]),(0,t._)("div",{class:"taskTitle",onClick:e[5]||(e[5]=a=>(0,s.SU)(P)(".t2"))},"队伍升级机制"),ba,(0,t._)("div",{class:"taskTitle",onClick:e[6]||(e[6]=a=>(0,s.SU)(P)(".t3"))},"个人升级机制"),qa,(0,t._)("div",{class:"taskTitle",onClick:e[7]||(e[7]=a=>(0,s.SU)(P)(".t4"))},"游戏线下奖励"),Ua],8,ua)])]),(0,t._)("div",{class:"popupSituation",onClick:e[9]||(e[9]=(...a)=>(0,s.SU)(k)&&(0,s.SU)(k)(...a))},[(0,t.Wm)(J,{showSit:(0,s.SU)(_),onChangeShowSit:(0,s.SU)(S)},null,8,["showSit","onChangeShowSit"])]),(0,t._)("div",Ca,[(0,t._)("div",Ta,(0,o.zw)((0,s.SU)(h)),1)]),(0,s.SU)(w)?((0,t.wg)(),(0,t.iD)("div",{key:0,class:"abcWarp",onClick:e[10]||(e[10]=(...a)=>(0,s.SU)(H)&&(0,s.SU)(H)(...a))},[(0,t._)("div",Pa,[(0,t._)("div",{class:"popUpabcIn",onClick:(0,n.iM)((a=>null),["stop"])},Da,8,wa)])])):(0,t.kq)("",!0),(0,s.SU)(x)?((0,t.wg)(),(0,t.iD)("div",{key:1,class:"abcWarp",onClick:e[11]||(e[11]=(...a)=>(0,s.SU)(B)&&(0,s.SU)(B)(...a))},[(0,t._)("div",Ha,[(0,t._)("div",$a,[(0,t._)("div",{onClick:(0,n.iM)((a=>null),["stop"])},[Wa,(0,t._)("span",null,[Xa,(0,t._)("div",Ma,[(0,t._)("img",{class:"rewardCardimg",src:(0,s.SU)(W)},null,8,Ya)])]),Ia,La,Na,Fa],8,Ba)])])])):(0,t.kq)("",!0)],64))}};const ja=(0,S.Z)(Ga,[["__scopeId","data-v-2ad29ea8"]]);var Ra=ja,Ka=l(3863),za=l(7400);const Ea=a=>((0,t.dD)("data-v-ef973ee8"),a=a(),(0,t.Cn)(),a),Va={class:"winPageWarp"},Oa={class:"winCardWarp"},Aa={class:"card0"},Ja=["src"],Qa=Ea((()=>(0,t._)("div",null,"青铜哦，再接再厉！",-1))),ae={class:"card0"},ee=["src"],le=Ea((()=>(0,t._)("div",null,"太棒啦，白银能手！",-1))),te={class:"card0"},se=["src"],oe=Ea((()=>(0,t._)("div",null,"OMG！已经是黄金啦！",-1))),ne=Ea((()=>(0,t._)("div",{class:"backToMain"},[(0,t._)("div",{class:"returnTips"},"点击任意地方返回")],-1)));var ie={__name:"winnerPage",props:{logo:{}},setup(a){const e=a,{logo:l}=(0,s.BK)(e);let o=(0,s.iH)("");1==i.Z.group.value?o.value="#00d599":2==i.Z.group.value&&(o.value="#ffc500");let n=(0,s.iH)(null),u=(0,s.iH)(null),r=(0,s.iH)(null),c=(0,s.iH)(null),d=(0,s.iH)(null),v=(0,s.iH)(null);(0,t.bv)((()=>{i.Z.groupLevel.value>=2&&(c.value.style.display="none",n.value.style.display="flex"),i.Z.groupLevel.value>=3&&(d.value.style.display="none",u.value.style.display="flex"),i.Z.groupLevel.value>=5&&(v.value.style.display="none",r.value.style.display="flex")})),(0,t.YP)(i.Z.groupLevel,(a=>{2==a?(c.value.style.display="none",n.value.style.display="flex"):3==a||4==a?(c.value.style.display="none",d.value.style.display="none",n.value.style.display="flex",u.value.style.display="flex"):5!=a&&6!=a||(c.value.style.display="none",d.value.style.display="none",v.value.style.display="none",n.value.style.display="flex",u.value.style.display="flex",r.value.style.display="flex")}));let g=()=>{document.querySelector(".popupWinerPage").style.display="none"};return(a,e)=>((0,t.wg)(),(0,t.iD)("div",Va,[(0,t._)("div",{class:"winpageWarp-AD",onClick:e[0]||(e[0]=(...a)=>(0,s.SU)(g)&&(0,s.SU)(g)(...a))},[(0,t.Wm)(Ka.Z,{logo:(0,s.SU)(l),clickable:!1},null,8,["logo"]),(0,t._)("section",Oa,[(0,t._)("div",Aa,[(0,t._)("div",{ref_key:"cd1",ref:c,class:"cardDefalutText"},"Group Lv.2即可解锁",512),(0,t._)("div",{ref_key:"card1",ref:n,class:"card1"},[(0,t._)("img",{class:"userimg",src:(0,s.SU)(i.Z).userImg},null,8,Ja),Qa],512)]),(0,t._)("div",ae,[(0,t._)("div",{ref_key:"cd2",ref:d,class:"cardDefalutText"},"Group Lv.3即可解锁",512),(0,t._)("div",{ref_key:"card2",ref:u,class:"card2"},[(0,t._)("img",{class:"userimg",src:(0,s.SU)(i.Z).userImg},null,8,ee),le],512)]),(0,t._)("div",te,[(0,t._)("div",{ref_key:"cd3",ref:v,class:"cardDefalutText"},"Group Lv.5即可解锁",512),(0,t._)("div",{ref_key:"card3",ref:r,class:"card3"},[(0,t._)("img",{class:"userimg",src:(0,s.SU)(i.Z).userImg},null,8,se),oe],512)])]),ne]),(0,t.Wm)(za.Z)]))}};const ue=(0,S.Z)(ie,[["__scopeId","data-v-ef973ee8"]]);var re=ue;const ce={class:"popupWinerPage"};var de={__name:"topUserInfo",props:{logo:{}},setup(a){const e=a,{logo:l}=(0,s.BK)(e);return(a,e)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(Ka.Z,{logo:(0,s.SU)(l),clickable:!0},null,8,["logo"]),(0,t._)("div",ce,[(0,t.Wm)(re,{logo:(0,s.SU)(l)},null,8,["logo"])])],64))}};const ve=(0,S.Z)(de,[["__scopeId","data-v-27a06e20"]]);var ge=ve;const pe={class:"gameView"},me={class:"game fade-in"};var he={__name:"gameView",setup(a){let e=(0,s.iH)(3),o=(0,s.iH)(!1),n=a=>{e.value=a},r=a=>{o.value=a},c=(0,s.iH)(null);0==i.Z.group.value?u.Z.replace("/loading"):1==i.Z.group.value?c.value=l(463):2==i.Z.group.value&&(c.value=l(7816));let d=new Image;d.src=l(5611);let v=new Image;return v.src=l(2912),(0,t.bv)((()=>{console.log("gameView onMounted")})),(a,l)=>((0,t.wg)(),(0,t.iD)("div",pe,[(0,t._)("div",me,[(0,t.Wm)(ge,{logo:(0,s.SU)(c)},null,8,["logo"]),(0,t.Wm)(b,{mode:(0,s.SU)(e),refresh:(0,s.SU)(o),onChangeMode:(0,s.SU)(n),onChangeRefresh:(0,s.SU)(r)},null,8,["mode","refresh","onChangeMode","onChangeRefresh"]),(0,t.Wm)(Ra,{mode:(0,s.SU)(e),refresh:(0,s.SU)(o),onChangeMode:(0,s.SU)(n),onChangeRefresh:(0,s.SU)(r)},null,8,["mode","refresh","onChangeMode","onChangeRefresh"]),(0,t.Wm)(za.Z)])]))}};const fe=(0,S.Z)(he,[["__scopeId","data-v-39c64b98"]]);var Ze=fe},5611:function(a,e,l){a.exports=l.p+"img/situation_border.a6fe45a2.png"},2912:function(a,e,l){a.exports=l.p+"img/win_card0.1e8e8f6c.png"}}]);
//# sourceMappingURL=242.8ad8e4b5.js.map